(function(){if(!window.NSHelper){NSHelper={ajaxJSONP:function(e){function a(){if(typeof e.error==="function")e.error.call(this)}if(!e.url||typeof e.url!=="string"||typeof e.url==="string"&&e.url.length===0)return;var t=e.url,n,r=new Date,i=typeof e.cache==="boolean"?e.cache:typeof e.jsonpCallback==="string"&&e.jsonpCallback.length>0?false:true,s=document.createElement("script"),o=r.getTime().toString()+"-"+Math.round(Math.random()*1e10).toString(),u=typeof e.jsonpCallback==="string"&&e.jsonpCallback.length>0?e.jsonpCallback:"notifySnack"+r.getTime().toString()+"_"+Math.round(Math.random()*1e10).toString();if(document.getElementById(o))o=r.getTime().toString()+"-"+Math.round(Math.random()*1e10).toString();s.setAttribute("id","notifySnack-jsonp-"+o);s.setAttribute("type","text/javascript");window[u]=function(t){n=t;if(typeof e.success==="function"){e.success.call(this,n)}try{delete window[u]}catch(r){window[u]=undefined}};if(t.indexOf("?")>0)t+="&callback="+u;else t+="?callback="+u;s.onerror=a;if(!i){if(t.indexOf("?")>0)t+="&_="+r.getTime().toString();else t+="?_="+r.getTime().toString()}if(typeof e.data!=="undefined"&&typeof e.data==="object"){for(var f in e.data){t+="&"+f+"="+e.data[f]}}document.getElementsByTagName("head")[0].appendChild(s);s.src=t},colorLuminosity:function(e,t){var n=this.strToRgb(e),r=n[0],i=n[1],s=n[2],o,u;o=this.rgbToHsl(r,i,s);u=this.hslToRgb(o[0],o[1],o[2]+t/100);r=Math.round(u[0]);i=Math.round(u[1]);s=Math.round(u[2]);r=r.toString(16);if(r.length===1)r="0"+r;i=i.toString(16);if(i.length===1)i="0"+i;s=s.toString(16);if(s.length===1)s="0"+s;return"#"+r+i+s},getColorTone:function(e){var t=this.strToRgb(e),n=t[0],r=t[1],i=t[2],s=(n*299+r*587+i*114)/1e3;return s>=128?"light":"dark"},rgbToHsl:function(e,t,n){e/=255,t/=255,n/=255;var r=Math.max(e,t,n),i=Math.min(e,t,n);var s,o,u=(r+i)/2;if(r==i){s=o=0}else{var a=r-i;o=u>.5?a/(2-r-i):a/(r+i);switch(r){case e:s=(t-n)/a+(t<n?6:0);break;case t:s=(n-e)/a+2;break;case n:s=(e-t)/a+4;break}s/=6}return[s,o,u]},hslToRgb:function(e,t,n){var r,i,s;if(t==0){r=i=s=n}else{function o(e,t,n){if(n<0)n+=1;if(n>1)n-=1;if(n<1/6)return e+(t-e)*6*n;if(n<1/2)return t;if(n<2/3)return e+(t-e)*(2/3-n)*6;return e}var u=n<.5?n*(1+t):n+t-n*t;var a=2*n-u;r=o(a,u,e+1/3);i=o(a,u,e);s=o(a,u,e-1/3)}return[r*255,i*255,s*255]},strToRgb:function(e){var t,n,r,i;if(e.indexOf("#")===0){if(e.length===4)t=parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16);else t=parseInt(e.substr(1),16)}else{t=parseInt(e,16)}n=t>>16&255;r=t>>8&255;i=t&255;return[n,r,i]},setUnselectable:function(e){e.style["user-select"]="text";e.style.MozUserSelect="text";e.style["-khtml-user-select"]="text";e.style.WebkitUserSelect="text";e.style["-ms-user-select"]="text";if(navigator.userAgent.toLowerCase().search("opera")>=0||navigator.appVersion.toLowerCase().search("opera")>=0){e.setAttribute("unselectable","on")}},easeOutBounce:function(e,t,n,r){var i=.3,s=.65;if(e<=s*r){return n/(s*s*r*r)*e*e+t}else{return 4*n*e*e*(i-1)/(r*r*(s*s-1))-4*n*e*(i-1)/(r*(s-1))+n-4*n*(i-1)/(s*s-1)+4*n*(i-1)/(s-1)+t}},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n}}}NotifySnack=function(){function detectHTML5Browser(){return!!document.createElement("audio").canPlayType}function detectMobileDevice(e,t){if(e.search("ipod")>-1||e.search("iphone")>-1||e.search("ipad")>-1||e.search("android")>-1||e.search("silk")>-1||e.search("playbook")>-1||e.search("windows phone")>-1)return true;else if(t.search("ipod")>-1||t.search("iphone")>-1||t.search("ipad")>-1||t.search("android")>-1||t.search("silk")>-1||t.search("playbook")>-1||t.search("windows phone")>-1)return true;else return false}function detectIE9(e,t){return e.search("msie 9")>-1||t.search("msie 9")>-1}function addGoogleAnalytics(){var e=document.getElementsByTagName("head")[0],t=document.getElementsByTagName("script")[0],n=document.createElement("script");n.setAttribute("type","text/javascript");n.text='var _gaq=_gaq||[];_gaq.push(["b._setAccount","UA-15731042-26"]);_gaq.push(["b._trackPageview"]);(function(){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})()';e.insertBefore(n,t)}function verifyDisplayRules(){var rulesValidityArray=new Array;var rulesLogOpArray=new Array;var ruleOK=false;var numberOfRules=0;for(var key in displayRulesArray){if(displayRulesArray.hasOwnProperty(key))numberOfRules++}for(var i=0;i<numberOfRules;i++){if(displayRulesArray.hasOwnProperty(i)){rulesValidityArray[i]=verifyURLdisplayRule(displayRulesArray[i].ruleCondition,displayRulesArray[i].ruleTarget);rulesLogOpArray[i]=displayRulesArray[i].ruleType==="2"?" && ":" || "}}if(rulesValidityArray.length===1){if(rulesValidityArray[0]==="true")ruleOK=true;else ruleOK=false}else{var expression='rulesValidityArray[0] === "true" ';var counter=1;var arrayLengthLimit=rulesValidityArray.length-1;for(var j=0;j<arrayLengthLimit;j++){expression+=rulesLogOpArray[j]+" rulesValidityArray["+counter+'] === "true" ';counter++}ruleOK=eval(expression)}return ruleOK}function verifyURLdisplayRule(e,t){var n=document.URL;var r=t.length;var i=RegExp(t);var s="false";var o="false";switch(e){case"1":if(n.indexOf(t)>=0)s="true";break;case"2":if(n===t)s="true";break;case"3":if(n.indexOf("http://"+t)===0||n.indexOf("https://"+t)===0)s="true";break;case"4":if(n.substring(n.length-r)===t)s="true";break;case"5":if(n.indexOf(t)<0)s="true";break;case"6":if(n!==t)s="true";break;case"7":if(n.indexOf("http://"+t)!==0&&n.indexOf("https://"+t)!==0)s="true";break;case"8":if(n.substring(n.length-r)!==t)s="true";break;case"9":if(i.test(n))s="true";break;default:s="false";break}return s}function loadFirstJSON(e){var t=notifyPaths.json+e;NSHelper.ajaxJSONP({url:t,jsonpCallback:"notify_"+e,success:firstJSONLoaded,error:jsonError})}function loadJSON(e,t){e++;if(e<NSHelper.allNotifyBarsArrayLength){hashID=t[e];nextHashId=t[e];var n=notifyPaths.json+nextHashId;NSHelper.ajaxJSONP({url:n,jsonpCallback:"notify_"+nextHashId,success:function(n){jsonLoaded(n,e,t)},error:jsonError})}else{return}}function loadJSON_NSD(){var e=notifyPaths.json+hashID;NSHelper.ajaxJSONP({url:e,jsonpCallback:"notify_"+hashID,success:jsonLoaded_NSD,error:jsonError})}function loadJSON_2(){if(!NSHelper.currentBar||NSHelper.currentBar===null||NSHelper.currentBar===""||targetContainer!=="body"){NSHelper.currentBar=hashID}var e=notifyPaths.json+hashID;NSHelper.ajaxJSONP({url:e,jsonpCallback:"notify_"+hashID,success:jsonLoaded_2,error:jsonError})}function tryDisplayingNotifyBar(e,t){if(targetContainer!=="body"){createBar()}else{if(!NSHelper.oneBarActive||NSHelper.oneBarActive===""||NSHelper.oneBarActive===null){NSHelper.oneBarActive="yes";if(myDisplayRulesFlag!=="true"){checkStatsAndInitNotify(e,t)}else{if(verifyDisplayRules()!==true){NSHelper.oneBarActive="";loadJSON(e,t)}else{checkStatsAndInitNotify(e,t)}}}else{return}}}function firstJSONLoaded(e){var t=e.configs,n=getDomainCookie("notifySnack-"+hashID);myDisplayRulesFlag=t.displayRulesFlag;state=printScreen||isNotifySnackDomain?"ON":t.state;displayRulesArray={};for(var r in e.display_rules){displayRulesArray[r]=e.display_rules[r]}if(editorCallback)editorCallback.call(this,e);type=t.type.toLowerCase();if(type!=="editable"&&type!=="published")type="published";type=preview||printScreen?"published":type;templateHashID=t.template_hash;showWatermark=t.watermark==="no"||type==="editable"||isNotifySnackDomain?false:true;if(type!=="editable"&&(typeof t.allow_widget_tracking==="undefined"||t.allow_widget_tracking==="true"||showWatermark))addGoogleAnalytics();config={};for(var i in t.params)config[i]=t.params[i];config.itemButton=config.itemButton==="true"?"false":"true";config.template_name=t.template_name;if(t.published_date)config.published_date=t.published_date;if(config.template_name!=="Stitch"){tabWidthList=TAB_WIDTH_LIST;tabHeightList=TAB_HEIGHT_LIST}else{tabWidthList=STITCH_TAB_WIDTH_LIST;tabHeightList=STITCH_TAB_HEIGHT_LIST}if(config.template_name==="Sharp"||config.itemBottom==="true"){config.itemPushing="false"}if(!t.notify||!t.notify.message_type){if(type!=="editable")return false;else messages.push({message:"Enter your message here",linktext:"Button label",linkhref:"#"})}else{setupMessages(t.notify)}if(type==="editable"||printScreen||isNotifySnackDomain){if(!preview&&(targetContainer!=="body"||printScreen)){config.itemShowDelay="0";config.subHideDelay="-1";config.itemClosable==="true"}}else if(targetContainer==="body"){if(n==="opened"){config.itemShowDelay="0";config.subHideDelay="-1"}else if(n==="closed"){config.itemShowDelay="-1";config.subHideDelay="-1"}}openDelay=parseInt(config.itemShowDelay);closeDelay=parseInt(config.subHideDelay);if(closeDelay>0&&n!=="opened"&&n!=="closed"){autoClose=true}shadowHeight=config.itemShadow==="true"?SHARP_INDENT_SHADOW:0;if(!isHTML5Browser){if(config.template_name==="Sharp")config.template_name="Plain";config.barStyle="style1";config.itemRounded="false";config.textShadow="false"}else if(isIE9){config.textShadow="false"}var s="";setTimeout(function(){s=getPriorityCookie("allNotifyBars");if(s.length>1){allNotifyBarsSplit=s.split(",");allNotifyBarsArray=new Array;if(s!==""&&allNotifyBarsSplit!==null){for(var e=0;e<allNotifyBarsSplit.length;e++){allNotifyBarsArray[e]=allNotifyBarsSplit[e]}}if(allNotifyBarsArray!==null)NSHelper.allNotifyBarsArrayLength=allNotifyBarsArray.length}deletePriorityCookie("allNotifyBars");tryDisplayingNotifyBar(0,allNotifyBarsArray)},500)}function jsonLoaded(e,t,n){var r=e.configs,i=getDomainCookie("notifySnack-"+hashID);myDisplayRulesFlag=r.displayRulesFlag;state=printScreen||isNotifySnackDomain?"ON":r.state;displayRulesArray={};for(var s in e.display_rules){displayRulesArray[s]=e.display_rules[s]}if(editorCallback)editorCallback.call(this,e);type=r.type.toLowerCase();if(type!=="editable"&&type!=="published")type="published";type=preview||printScreen?"published":type;templateHashID=r.template_hash;showWatermark=r.watermark==="no"||type==="editable"||isNotifySnackDomain?false:true;if(type!=="editable"&&(typeof r.allow_widget_tracking==="undefined"||r.allow_widget_tracking==="true"||showWatermark))addGoogleAnalytics();config={};for(var o in r.params)config[o]=r.params[o];config.itemButton=config.itemButton==="true"?"false":"true";config.template_name=r.template_name;if(r.published_date)config.published_date=r.published_date;if(config.template_name!=="Stitch"){tabWidthList=TAB_WIDTH_LIST;tabHeightList=TAB_HEIGHT_LIST}else{tabWidthList=STITCH_TAB_WIDTH_LIST;tabHeightList=STITCH_TAB_HEIGHT_LIST}if(config.template_name==="Sharp"||config.itemBottom==="true"){config.itemPushing="false"}if(!r.notify||!r.notify.message_type){if(type!=="editable")return false;else messages.push({message:"Enter your message here",linktext:"Button label",linkhref:"#"})}else{setupMessages(r.notify)}if(type==="editable"||printScreen||isNotifySnackDomain){if(!preview&&(targetContainer!=="body"||printScreen)){config.itemShowDelay="0";config.subHideDelay="-1";config.itemClosable==="true"}}else if(targetContainer==="body"){if(i==="opened"){config.itemShowDelay="0";config.subHideDelay="-1"}else if(i==="closed"){config.itemShowDelay="-1";config.subHideDelay="-1"}}openDelay=parseInt(config.itemShowDelay);closeDelay=parseInt(config.subHideDelay);if(closeDelay>0&&i!=="opened"&&i!=="closed"){autoClose=true}shadowHeight=config.itemShadow==="true"?SHARP_INDENT_SHADOW:0;if(!isHTML5Browser){if(config.template_name==="Sharp")config.template_name="Plain";config.barStyle="style1";config.itemRounded="false";config.textShadow="false"}else if(isIE9){config.textShadow="false"}tryDisplayingNotifyBar(t,n)}function jsonLoaded_NSD(e){var t=e.configs,n=getDomainCookie("notifySnack-"+hashID);myDisplayRulesFlag=t.displayRulesFlag;state=printScreen||isNotifySnackDomain?"ON":t.state;displayRulesArray={};for(var r in e.display_rules){displayRulesArray[r]=e.display_rules[r]}if(editorCallback)editorCallback.call(this,e);type=t.type.toLowerCase();if(type!=="editable"&&type!=="published")type="published";type=preview||printScreen?"published":type;templateHashID=t.template_hash;showWatermark=t.watermark==="no"||type==="editable"||isNotifySnackDomain?false:true;if(type!=="editable"&&(typeof t.allow_widget_tracking==="undefined"||t.allow_widget_tracking==="true"||showWatermark))addGoogleAnalytics();config={};for(var i in t.params)config[i]=t.params[i];config.itemButton=config.itemButton==="true"?"false":"true";config.template_name=t.template_name;if(t.published_date)config.published_date=t.published_date;if(config.template_name!=="Stitch"){tabWidthList=TAB_WIDTH_LIST;tabHeightList=TAB_HEIGHT_LIST}else{tabWidthList=STITCH_TAB_WIDTH_LIST;tabHeightList=STITCH_TAB_HEIGHT_LIST}if(config.template_name==="Sharp"||config.itemBottom==="true"){config.itemPushing="false"}if(!t.notify||!t.notify.message_type){if(type!=="editable")return false;else messages.push({message:"Enter your message here",linktext:"Button label",linkhref:"#"})}else{setupMessages(t.notify)}if(type==="editable"||printScreen||isNotifySnackDomain){if(!preview&&(targetContainer!=="body"||printScreen)){config.itemShowDelay="0";config.subHideDelay="-1";config.itemClosable==="true"}}else if(targetContainer==="body"){if(n==="opened"){config.itemShowDelay="0";config.subHideDelay="-1"}else if(n==="closed"){config.itemShowDelay="-1";config.subHideDelay="-1"}}openDelay=parseInt(config.itemShowDelay);closeDelay=parseInt(config.subHideDelay);if(closeDelay>0&&n!=="opened"&&n!=="closed"){autoClose=true}shadowHeight=config.itemShadow==="true"?SHARP_INDENT_SHADOW:0;if(!isHTML5Browser){if(config.template_name==="Sharp")config.template_name="Plain";config.barStyle="style1";config.itemRounded="false";config.textShadow="false"}else if(isIE9){config.textShadow="false"}createBar()}function jsonLoaded_2(e){var t=e.configs,n=getDomainCookie("notifySnack-"+hashID);myDisplayRulesFlag=t.displayRulesFlag;state=printScreen||isNotifySnackDomain?"ON":t.state;displayRulesArray={};for(var r in e.display_rules){displayRulesArray[r]=e.display_rules[r]}if(editorCallback)editorCallback.call(this,e);type=t.type.toLowerCase();if(type!=="editable"&&type!=="published")type="published";type=preview||printScreen?"published":type;templateHashID=t.template_hash;showWatermark=t.watermark==="no"||type==="editable"||isNotifySnackDomain?false:true;if(type!=="editable"&&(typeof t.allow_widget_tracking==="undefined"||t.allow_widget_tracking==="true"||showWatermark))addGoogleAnalytics();config={};for(var i in t.params)config[i]=t.params[i];config.itemButton=config.itemButton==="true"?"false":"true";config.template_name=t.template_name;if(t.published_date)config.published_date=t.published_date;if(config.template_name!=="Stitch"){tabWidthList=TAB_WIDTH_LIST;tabHeightList=TAB_HEIGHT_LIST}else{tabWidthList=STITCH_TAB_WIDTH_LIST;tabHeightList=STITCH_TAB_HEIGHT_LIST}if(config.template_name==="Sharp"||config.itemBottom==="true"){config.itemPushing="false"}if(!t.notify||!t.notify.message_type){if(type!=="editable")return false;else messages.push({message:"Enter your message here",linktext:"Button label",linkhref:"#"})}else{setupMessages(t.notify)}if(type==="editable"||printScreen||isNotifySnackDomain){if(!preview&&(targetContainer!=="body"||printScreen)){config.itemShowDelay="0";config.subHideDelay="-1";config.itemClosable==="true"}}else if(targetContainer==="body"){if(n==="opened"){config.itemShowDelay="0";config.subHideDelay="-1"}else if(n==="closed"){config.itemShowDelay="-1";config.subHideDelay="-1"}}openDelay=parseInt(config.itemShowDelay);closeDelay=parseInt(config.subHideDelay);if(closeDelay>0&&n!=="opened"&&n!=="closed"){autoClose=true}shadowHeight=config.itemShadow==="true"?SHARP_INDENT_SHADOW:0;if(!isHTML5Browser){if(config.template_name==="Sharp")config.template_name="Plain";config.barStyle="style1";config.itemRounded="false";config.textShadow="false"}else if(isIE9){config.textShadow="false"}if((type==="editable"||targetContainer!=="body")&&isNotifySnackDomain){createBar()}else{if(myDisplayRulesFlag!=="true"){checkStatsAndInitNotify_2()}else{if(verifyDisplayRules()!==true){if(NSHelper.currentBar===hashID)NSHelper.currentBar="";return}else{checkStatsAndInitNotify_2()}}}}function jsonError(){return}function setupMessages(e){messages=[];switch(e.message_type){case"Manual":{if(!e.message){messages.push({message:"Enter your message here",linktext:"Button label",linkhref:"#"})}else{var t,n,r;for(var i in e.message){t=e.message[i].content;r=e.message[i].text.length>0?e.message[i].text:"";n=e.message[i].link.length>0&&e.message[i].link!=="Link URL"?e.message[i].link:"#";if(n!=="#"&&n.indexOf("http://")!==0&&n.indexOf("https://")!==0&&n.indexOf("ftp://")!==0&&n.indexOf("ftps://")!==0&&n.indexOf("mailto")!==0)n=""+n;messages.push({message:t,linktext:r,linkhref:n})}}}break;case"RSS Feed":{var s=e.feed_url,o=e.rss_readmore_text&&typeof e.rss_readmore_text==="string"&&e.rss_readmore_text.length>0?e.rss_readmore_text:"Read More",u=!e.entries?5:parseInt(e.entries);u=isNaN(u)||u<1||u>5?5:u;if(s.length===0){messages.push({message:"Enter a feed URL",linktext:o,linkhref:""})}else{getRSSMessages(s,u,o)}}break;case"Twitter":{var a=e.twitter_username,f=!e.total_tweets?5:parseInt(e.total_tweets);f=isNaN(f)||f<1||f>5?5:f;if(a.length===0){messages.push({message:"Enter a Twitter username",linktext:"",linkhref:""})}else{getTweets(a,f)}}break}}function getRSSMessages(e,t,n){NSHelper.ajaxJSONP({url:document.location.protocol+"//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num="+t+"&output=json&q="+encodeURIComponent(e),cache:false,success:function(e){if(e.responseData!==null&&e.responseStatus!==400){for(var r=0;r<t;r++){if(e.responseData.feed.entries[r]!==null){var i={message:e.responseData.feed.entries[r].title,linktext:n,linkhref:e.responseData.feed.entries[r].link?e.responseData.feed.entries[r].link:"#"};messages.push(i)}}if(bar&&barContainer){if(!messageContainer)createBarContent();else createMessageContainers()}}else{if(type==="editable"&&showErrorMessage){showErrorMessage("Invalid RSS url!",2e4)}}}})}function getTweets(e,t){var n=0,r={},i=type==="editable"?true:false,s={loadTweets:function(){NSHelper.ajaxJSONP({url:notifyPaths.twitter,dataType:"json",data:{notifyBarHashId:hashID,editable_mode:i,screen_name:e,include_rts:true,include_entities:true,trim_user:true,count:t},error:function(e){if(type==="editable"&&showErrorMessage){showErrorMessage("Invalid Twitter username!",1e4);messages.push({message:"Please enter a valid Twitter username!",linktext:"",linkhref:""});if(bar&&barContainer){if(!messageContainer)createBarContent();else createMessageContainers()}n=1}},success:function(e,r,i){for(var o=0;o<t;o++){textdata=e[o].text,msg={message:s.ify.clean(e[o].text),linktext:"",linkhref:""};messages.push(msg)}if(bar&&barContainer){if(!messageContainer)createBarContent();else createMessageContainers()}n=1}});setTimeout(function(){if(n===0){if(type==="editable"&&showErrorMessage){showErrorMessage("Invalid Twitter username!",2e4)}}},3e3)},ify:{link:function(e){return e.replace(/\b(((https*\:\/\/)|www\.)[^\"\']+?)(([!?,.\)]+)?(\s|$))/g,function(e,t,n,r,i){var s=n.match(/w/)?"http://":"";return'<a class="twtr-hyperlink" style="color: rgb('+NSHelper.strToRgb(config.linkColor)+');" target='+(config.itemTarget==="true"?'"_blank"':'"_self"')+' href="'+s+t+'">'+(t.length>25?t.substr(0,24)+"...":t)+"</a>"+i})},at:function(e){return e.replace(/\B[@＠]([a-zA-Z0-9_]{1,20})/g,function(e,t){return"<a target="+(config.itemTarget==="true"?'"_blank"':'"_self"')+' class="twtr-atreply" style="color: rgb('+NSHelper.strToRgb(config.linkColor)+');" href="http://twitter.com/intent/user?screen_name='+t+'">@'+t+"</a>"})},list:function(e){return e.replace(/\B[@＠]([a-zA-Z0-9_]{1,20}\/\w+)/g,function(e,t){return"<a target="+(config.itemTarget==="true"?'"_blank"':'"_self"')+' class="twtr-atreply" style="color: rgb('+NSHelper.strToRgb(config.linkColor)+');" href="http://twitter.com/'+t+'">@'+t+"</a>"})},hash:function(e){return e.replace(/(^|\s+)#(\w+)/gi,function(e,t,n){return t+"<a target="+(config.itemTarget==="true"?'"_blank"':'"_self"')+' style="color: rgb('+NSHelper.strToRgb(config.linkColor)+');" class="twtr-hashtag" href="http://twitter.com/search?q=%23'+n+'">#'+n+"</a>"})},clean:function(e){return this.hash(this.at(this.list(this.link(e))))}}};s.loadTweets()}function checkStatsAndInitNotify(e,t){var n=showWatermark?2:3;NSHelper.ajaxJSONP({url:notifyPaths.stats,data:{terminal:"notifysnack",item_id:hashID,item_type:n,domain:currentDomain,type:"json"},error:handleStatsError,success:function(n){processStatsResponse(n,e,t)}});statsTimer=setTimeout(function(){clearTimeout(statsTimer);showWatermark=false;disregardStatsResponse=true;createBar(e,t)},3e3)}function checkStatsAndInitNotify_2(){var e=showWatermark?2:3;NSHelper.ajaxJSONP({url:notifyPaths.stats,data:{terminal:"notifysnack",item_id:hashID,item_type:e,domain:currentDomain,type:"json"},error:handleStatsError,success:processStatsResponse});statsTimer=setTimeout(function(){clearTimeout(statsTimer);showWatermark=false;disregardStatsResponse=true;createBar()},3e3)}function checkStatsAndInitNotify_NS(){var e=showWatermark?2:3;NSHelper.ajaxJSONP({url:notifyPaths.stats,data:{terminal:"notifysnack",item_id:hashID,item_type:e,domain:currentDomain,type:"json"},error:handleStatsError,success:processStatsResponse});statsTimer=setTimeout(function(){clearTimeout(statsTimer);showWatermark=false;disregardStatsResponse=true;createBar()},3e3)}function handleStatsError(e,t,n){clearTimeout(statsTimer);showWatermark=false;disregardStatsResponse=true;createBar()}function processStatsResponse(e,t,n){var r,i;clearTimeout(statsTimer);if(disregardStatsResponse)return;if(typeof e==="object"){r=e.premium;i=e.permit;if(r===1)showWatermark=false;if(i===0&&!isSnackDomain)showWatermark=true}createBar(t,n)}function embedFonts(){var e,t,n,r,i;if(isHTML5Browser){if(type==="editable"){e=["Italiana::latin","Alex+Brush::latin,latin-ext","Antic+Didone::latin","Bree+Serif::latin,latin-ext","Droid+Sans::latin","Oleo+Script:400,700:latin,latin-ext","Playball::latin,latin-ext","Pontano+Sans::latin,latin-ext","Share:400,400italic,700,700italic:latin,latin-ext","Voltaire::latin","Open+Sans:400,300italic,300,400italic,700,700italic:latin,greek,latin-ext,cyrillic","Open+Sans+Condensed:300,700:latin,greek,latin-ext,cyrillic"]}else{switch(config.itemFontFamily){case"'Italiana', serif":e=["Italiana::latin"];break;case"'Pontano Sans', sans-serif":e=["Pontano+Sans::latin,latin-ext"];break;case"'Alex Brush', cursive":e=["Alex+Brush::latin,latin-ext"];break;case"'Bree Serif', serif":e=["Bree+Serif::latin,latin-ext"];break;case"'Droid Sans', sans-serif":e=["Droid+Sans::latin"];break;case"'Open Sans', sans-serif":e=["Open+Sans:400,300italic,300,400italic,700,700italic:latin,greek,latin-ext,cyrillic","Open+Sans+Condensed:300,700:latin,greek,latin-ext,cyrillic"];break;case"'Voltaire', sans-serif":e=["Voltaire::latin"];break;case"'Share', cursive":e=["Share:400,400italic,700,700italic:latin,latin-ext"];break;case"'Antic Didone', serif":e=["Antic+Didone::latin"];break;case"'Oleo Script', cursive":e=["Oleo+Script:400,700:latin,latin-ext"];break;case"'Playball', cursive":e=["Playball::latin,latin-ext"];break;default:e=[]}}if(e.length===0){isFontFinished=true;return}else{WebFontConfig={google:{families:e},fontactive:function(e,t){if(e===config.itemFontFamily.split("'")[1]){isFontFinished=true;if(!isContentSetupDone&&messageContainer)setupBarContent()}},fontinactive:function(e,t){if(e===config.itemFontFamily.split("'")[1]){isFontFinished=true;if(!isContentSetupDone&&messageContainer)setupBarContent()}},active:function(){isFontFinished=true;if(!isContentSetupDone&&messageContainer)setupBarContent()},inactive:function(){isFontFinished=true;if(!isContentSetupDone&&messageContainer)setupBarContent()}};(function(){var e=document.createElement("script");e.src=("https:"===document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";e.type="text/javascript";e.async="true";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})()}}else{e=config.itemFontFamily.split("'")[1];r=document.getElementsByTagName("head")[0];i=document.getElementsByTagName("script")[0];var s=document.location.protocol+"//fonts.googleapis.com/css?";switch(e){case"Italiana":t=s+"family=Italiana";break;case"Alex Brush":t=s+"family=Alex+Brush&subset=latin,latin-ext";break;case"Antic Didone":t=s+"family=Antic+Didone";break;case"Bree Serif":t=s+"family=Bree+Serif&subset=latin,latin-ext";break;case"Droid Sans":t=s+"family=Droid+Sans";break;case"Josefin Sans":t=s+"family=Josefin+Sans:400,700,700italic";break;case"Oleo Script":t=s+"family=Oleo+Script:400,700&subset=latin,latin-ext";break;case"Playball":t=s+"family=Playball&subset=latin,latin-ext";break;case"Pontano Sans":t=s+"family=Pontano+Sans&subset=latin,latin-ext";break;case"Share":t=s+"family=Share:400,400italic,700,700italic&subset=latin,latin-ext";break;case"Voltaire":t=s+"family=Voltaire";break;case"Open Sans":t=s+"family=Open+Sans:300italic,400italic,700italic,400,300,700&subset=latin,greek-ext,greek,latin-ext,cyrillic";break;case"Open Sans Condensed":t=s+"family=Open+Sans+Condensed:300,700&subset=latin,greek-ext,greek,latin-ext,cyrillic";break}if(t){n=document.createElement("link");n.type="text/css";n.rel="stylesheet";n.onload=function(){isFontFinished=true;if(!isContentSetupDone&&messageContainer)setupBarContent()};n.onerror=function(){isFontFinished=true;if(!isContentSetupDone&&messageContainer)setupBarContent()};if(i.parentNode===r)r.insertBefore(n,i);else r.appendChild(n);n.href=t}else{isFontFinished=true}}}function setPriorityCookie(e,t,n){var r=new Date;r.setDate(r.getDate()+n);var i=escape(t)+(n==null?"":"; expires="+r.toUTCString());document.cookie=e+"="+i}function getPriorityCookie(e){var t=document.cookie;var n=t.indexOf(" "+e+"=");if(n==-1){n=t.indexOf(e+"=")}if(n==-1){t=null}else{n=t.indexOf("=",n)+1;var r=t.indexOf(";",n);if(r==-1){r=t.length}t=unescape(t.substring(n,r))}return t}function deletePriorityCookie(e){document.cookie=e+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;"}function checkPriorityCookie(){var e=getCookie("username");if(e!=null&&e!=""){alert("Welcome again "+e)}else{e=prompt("Please enter your name:","");if(e!=null&&e!=""){setCookie("username",e,365)}}}function createBar(e,t){if(NSHelper.browser!=="new"&&NSHelper.currentBar!==hashID&&NSHelper.currentBar!==""&&NSHelper.currentBar!==null&&!isNotifySnackDomain&&type!=="editable"&&!printScreen){return}if(NSHelper.browser!=="new"&&(!NSHelper.currentBar||NSHelper.currentBar===""||NSHelper.currentBar===null)){NSHelper.currentBar=hashID}if(config.itemDismiss!=="true"||preview&&targetContainer==="inner"||type==="editable"||targetContainer!=="body"){deletePermanentCookie(hashID)}if(checkPermanentCookie(hashID)===false||config.itemDismiss!=="true"||targetContainer==="wrapper"||type==="editable"||targetContainer!=="body"){var n;if(showWatermark&&config.published_date)messages.splice(1,messages.length-1);barHeight=maxBarHeight=parseInt(config.itemHeight);if(config.itemBorder==="true"&&config.template_name==="Plain")barHeight=maxBarHeight-2;isBarOpen=type==="editable"&&targetContainer!=="body"||printScreen;embedFonts();if(printScreen)isFontFinished=true;if(!targetContainer)targetContainer="body";if(targetContainer==="body"){n=document.getElementsByTagName("body")[0];if(!n){throw new Error("Could not find HTML element width this id!");return}}else{n=document.getElementById(targetContainer);if(!n){throw new Error('Could not find HTML element width id "'+targetContainer+'"');return}}bar=document.createElement("div");bar.setAttribute("id",notifyID);cssReset(bar);if(preview&&targetContainer==="inner"){bar.style.width=document.getElementById(targetContainer).clientWidth+"px"}else{bar.style.width="100%"}bar.style.height="1px";if(config.itemBottom==="true"){bar.style["-webkit-transition-property"]="bottom";bar.style["-moz-transition-property"]="bottom";bar.style["-ms-transition-property"]="bottom";bar.style["-o-transition-property"]="bottom";bar.style["transition-property"]="bottom";bar.style["-webkit-transition-duration"]="700ms";bar.style["-moz-transition-duration"]="700ms";bar.style["-ms-transition-duration"]="700ms";bar.style["-o-transition-duration"]="700ms";bar.style["transition-duration"]="700ms";bar.style.position=targetContainer==="body"?"fixed":preview&&targetContainer==="inner"?"fixed":"absolute"}else{bar.style["-webkit-transition-property"]="top";bar.style["-moz-transition-property"]="top";bar.style["-ms-transition-property"]="top";bar.style["-o-transition-property"]="top";bar.style["transition-property"]="top";bar.style["-webkit-transition-duration"]="700ms";bar.style["-moz-transition-duration"]="700ms";bar.style["-ms-transition-duration"]="700ms";bar.style["-o-transition-duration"]="700ms";bar.style["transition-duration"]="700ms";bar.style.position=targetContainer==="body"&&config.itemOntop==="true"?"fixed":preview&&targetContainer==="inner"&&config.itemOntop==="true"?"fixed":"absolute"}bar.style.margin="0";bar.style.padding="0";if(config.itemBottom==="true"){bar.style.top="auto";bar.style.bottom=type==="editable"&&targetContainer!=="body"?"0":"-"+(maxBarHeight+shadowHeight)+"px"}else{bar.style.bottom="auto";bar.style.top=type==="editable"&&targetContainer!=="body"?"0":"-"+(maxBarHeight+shadowHeight)+"px"}bar.style.left="0px";bar.style.zIndex=targetContainer==="body"?2147483646:0;if(isSnackws&&snackWSGlobalBG){n=document.getElementsByTagName("body")[0];if(!n){throw new Error("Could not find HTML element width this id!");return}n.insertBefore(bar,snackWSGlobalBG)}else{n.insertBefore(bar,n.firstChild)}barWidth=bar.clientWidth;if(barWidth<=SMALL_WIDTH_LIMIT)isCloseBtnOutside=true;pusher=document.createElement("div");cssReset(pusher);pusher.setAttribute("id",notifyID+"-pusher");pusher.style.position=config.itemPushing==="true"&&config.itemBottom!=="true"?"relative":"absolute";pusher.style.background="transparent";if(preview&&targetContainer==="inner"){pusher.style.width=document.getElementById(targetContainer).clientWidth+"px"}else{pusher.style.width="100%"}if(isSnackws&&snackWSGlobalBG){n=document.getElementsByTagName("body")[0];if(!n){throw new Error("Could not find HTML element width this id!");return}n.insertBefore(pusher,bar)}else{n.insertBefore(pusher,bar)}barContainer=document.createElement("div");cssReset(barContainer);barContainer.setAttribute("id",notifyID+"-container");barContainer.style.width="100%";barContainer.style.zIndex=5e3;if(config.itemBottom==="true"){barContainer.style["-webkit-transition-property"]="bottom";barContainer.style["-moz-transition-property"]="bottom";barContainer.style["-ms-transition-property"]="bottom";barContainer.style["-o-transition-property"]="bottom";barContainer.style["transition-property"]="bottom";barContainer.style.position=targetContainer==="body"?"fixed":preview&&targetContainer==="inner"?"fixed":"absolute"}else{barContainer.style["-webkit-transition-property"]="top";barContainer.style["-moz-transition-property"]="top";barContainer.style["-ms-transition-property"]="top";barContainer.style["-o-transition-property"]="top";barContainer.style["transition-property"]="top";barContainer.style.position=targetContainer==="body"&&config.itemOntop==="true"?"fixed":preview&&targetContainer==="inner"&&config.itemOntop==="true"?"fixed":"absolute"}bar.appendChild(barContainer);NSHelper.setUnselectable(barContainer);barNormalBg=document.createElement("div");cssReset(barNormalBg);barContainer.style.width="100%";barContainer.appendChild(barNormalBg);borderContainer=document.createElement("div");cssReset(borderContainer);barContainer.appendChild(borderContainer);symbolColor=config.backgroundTone==="dark"?"light":"dark";if(maxBarHeight<41){sizeIdx=0;upSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_close_small_"+symbolColor+".png";downSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_open_small_"+symbolColor+".png"}else if(maxBarHeight>=41&&maxBarHeight<49){sizeIdx=1;upSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_close_small_"+symbolColor+".png";downSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_open_small_"+symbolColor+".png"}else if(maxBarHeight>=49&&maxBarHeight<60){sizeIdx=2;upSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_close_middle_"+symbolColor+".png";downSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_open_middle_"+symbolColor+".png"}else if(maxBarHeight>=60){sizeIdx=3;upSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_close_large_"+symbolColor+".png";downSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_open_large_"+symbolColor+".png"}preloadSymbols();if(config.template_name==="Stitch")preloadStitching();if(config.backgroundType==="texture"){preloadTexture()}else{isBGLoaded=true;setBarBackground();wmSize=maxBarHeight>WM_LIMIT?barWidth<=SMALL_WIDTH_LIMIT?"16":"large":barWidth<=SMALL_WIDTH_LIMIT?"16":"small";if(showWatermark)createWatermark();if(config.itemClosable==="true"){createOpenButton();createCloseButton()}else{if(openDelay!==0&&!(type==="editable"&&targetContainer!=="body"&&!preview&&!printScreen)){openTimer=setTimeout(openBar,openDelay*1e3)}}createBarContent()}}else{if(isNotifySnackDomain||type==="editable"||printScreen){}else{if(NSHelper.browser!=="new"){NSHelper.currentBar=""}else{NSHelper.oneBarActive="";loadJSON(e,t)}}}}function preloadTexture(){textureImg=new Image;textureImg.onerror=function(){isBGLoaded=true;setBarBackground();wmSize=maxBarHeight>WM_LIMIT?barWidth<=SMALL_WIDTH_LIMIT?"16":"large":barWidth<=SMALL_WIDTH_LIMIT?"16":"small";if(showWatermark)createWatermark();if(config.itemClosable==="true"){if(!openTabContainer)createOpenButton();else{setupOpenButton();openTabContainer.style.display="block"}if(!closeTabContainer)createCloseButton();else{setupCloseButton(isCloseBtnOutside);closeTabContainer.style.display="block"}}else{if(openTabContainer)openTabContainer.style.display="none";if(closeTabContainer)closeTabContainer.style.display="none";if(openDelay!==0&&!(type==="editable"&&targetContainer!=="body"&&!preview&&!printScreen)){openTimer=setTimeout(openBar,openDelay*1e3)}}if(!messageContainer)createBarContent();else createMessageContainers()};textureImg.onload=function(){isBGLoaded=true;setBarBackground();wmSize=maxBarHeight>WM_LIMIT?barWidth<=SMALL_WIDTH_LIMIT?"16":"large":barWidth<=SMALL_WIDTH_LIMIT?"16":"small";if(showWatermark)createWatermark();if(config.itemClosable==="true"){if(!openTabContainer)createOpenButton();else{setupOpenButton();openTabContainer.style.display="block"}if(!closeTabContainer)createCloseButton();else{setupCloseButton(isCloseBtnOutside);closeTabContainer.style.display="block"}}else{if(openTabContainer)openTabContainer.style.display="none";if(closeTabContainer)closeTabContainer.style.display="none";if(openDelay!==0&&!(type==="editable"&&targetContainer!=="body"&&!preview&&!printScreen)){if(openDelay>0)openTimer=setTimeout(openBar,openDelay*1e3)}}if(!messageContainer)createBarContent();else createMessageContainers()};textureImg.src=notifyPaths.background+"textures/"+config.backgroundColor}function preloadStitching(){hs=new Image;ls=new Image;rs=new Image;hs.src=notifyPaths.background+"horizontal_stitch.png";ls.src=notifyPaths.background+"vertical_left_stitch.png";rs.src=notifyPaths.background+"vertical_right_stitch.png"}function preloadSymbols(){us=new Image;ds=new Image;us.src=upSymbol;ds.src=downSymbol}function getRotationDegrees(e){if(e.style["-webkit-transform"]==="rotate(180deg)"||e.style["-moz-transform"]==="rotate(180deg)"||e.style["-ms-transform"]==="rotate(180deg)"||e.style["-o-transform"]==="rotate(180deg)")angle=180;else angle=0;return angle}function setBarBackground(){if(pusher){pusher.style.height="0px"}barContainer.style.height=maxBarHeight+"px";if(config.itemBottom==="true"){bar.style.top="auto";barContainer.style.top="auto";bar.style.bottom="0";barContainer.style.bottom=type==="editable"&&targetContainer!=="body"||isBarOpen||printScreen?"0":"-"+(maxBarHeight+shadowHeight)+"px"}else{bar.style.bottom="auto";barContainer.style.bottom="auto";bar.style.top="0";barContainer.style.top=type==="editable"&&targetContainer!=="body"||isBarOpen||printScreen?"0":"-"+(maxBarHeight+shadowHeight)+"px"}if(config.template_name!=="Sharp"){barNormalBg.style.height=barContainer.style.height;if(barCanvasBg&&barCanvasBg.getContext("2d")){barCanvasBg.getContext("2d").clearRect(0,0,4e3,80)}if(config.backgroundType==="texture"){barNormalBg.style.filter="";barNormalBg.style.backgroundColor="transparent";barNormalBg.style.backgroundImage="url("+notifyPaths.background+"textures/"+config.backgroundColor+")";barNormalBg.style.backgroundRepeat="repeat"}else{if(config.backgroundGradient==="true"){if(isHTML5Browser){var e="top, #"+config.backgroundColor+" 0%, "+NSHelper.colorLuminosity(config.backgroundColor,DARK_MIDDLE_PERCENT)+" 50%, "+NSHelper.colorLuminosity(config.backgroundColor,DARK_BOTTOM_PERCENT)+" 100%";barNormalBg.style.background="linear-gradient("+e+")";barNormalBg.style.background="-moz-linear-gradient("+e+")";barNormalBg.style.background="-webkit-linear-gradient("+e+")";barNormalBg.style.background="-ms-linear-gradient("+e+")";barNormalBg.style.background="-o-linear-gradient("+e+")";applyIE8BgFilter(barNormalBg);applyIE9BgFilter(isIE9)}else{barNormalBg.style.backgroundColor="transparent";barNormalBg.style.backgroundImage="";applyIE8BgFilter(barNormalBg)}}else{barNormalBg.style.backgroundColor="#"+config.backgroundColor;barNormalBg.style.backgroundImage="";barNormalBg.style.backgroundRepeat="";barNormalBg.style.filter=""}}if(config.template_name==="Stitch"){applyStitching()}else{if(topStitch)document.removeChild(topStitch);topStitch=undefined;if(bottomStitch)document.removeChild(bottomStitch);bottomStitch=undefined}}else{applyIndentation();applyIE9BgFilter(isIE9)}if(config.itemShadow==="true"&&config.template_name!=="Sharp"){if(isHTML5Browser){barNormalBg.style.boxShadow="0 0 2px 1px rgba(0, 0, 0, 0.5)";barNormalBg.style["-o-box-shadow"]="0 0 2px 1px rgba(0, 0, 0, 0.5)";barNormalBg.style["-ms-box-shadow"]="0 0 2px 1px rgba(0, 0, 0, 0.5)";barNormalBg.style["-moz-box-shadow"]="0 0 2px 1px rgba(0, 0, 0, 0.5)";barNormalBg.style["-webkit-box-shadow"]="0 0 2px 1px rgba(0, 0, 0, 0.5)"}else{applyIE8BgFilter(barNormalBg)}}else{if(isHTML5Browser){barNormalBg.style.boxShadow="";barNormalBg.style["-o-box-shadow"]="";barNormalBg.style["-ms-box-shadow"]="";barNormalBg.style["-moz-box-shadow"]="";barNormalBg.style["-webkit-box-shadow"]=""}else{applyIE8BgFilter(barNormalBg)}}if(config.itemBorder==="true"&&config.template_name==="Plain"){borderContainer.style.height="2px";borderContainer.style.width="100%";borderContainer.style.position="absolute";if(config.itemBottom==="true"){borderContainer.style.bottom="auto";borderContainer.style.top="0px"}else{borderContainer.style.top="auto";borderContainer.style.bottom="0px"}borderContainer.style.backgroundColor="#FFF";borderContainer.style.opacity="0.3";borderContainer.style.filter="alpha(opacity=30)";borderContainer.style.display="block"}else{borderContainer.style.display="none"}if(isFirstSlide&&config.itemClosable==="false"&&openDelay===0&&!(type==="editable"&&targetContainer!=="body"&&!preview&&!printScreen)){isFirstSlide=false;slide(barInterval,barContainer,maxBarHeight+shadowHeight,SLIDE_SPEED,config.itemUsebounce==="true",config.itemPushing==="true"&&pusher?config.template_name==="Sharp"?maxBarHeight-SHARP_INDENT_HEIGHT:maxBarHeight:-1,function(){isBarOpen=true;if(closeDelay>0){closeTimer=setTimeout(closeBar,closeDelay*1e3)}})}}function applyIE9BgFilter(e){if(e===true){barNormalBg.style.backgroundColor="#"+config.backgroundColor;barNormalBg.style.backgroundImage="";barNormalBg.style.backgroundRepeat="";barNormalBg.style.filter=""}}function applyIE8BgFilter(e){var t="",n='progid:DXImageTransform.Microsoft.gradient(startColorStr="#'+config.backgroundColor+'", endColorStr="'+NSHelper.colorLuminosity(config.backgroundColor,DARK_BOTTOM_PERCENT)+'", GradientType=0)',r='progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=180, Color="#666666")';if(config.backgroundType==="solid"&&config.backgroundGradient==="true")t=n;if(config.itemShadow==="true")t=t.length>0?t+" "+r:r;e.style.filter=t}function applyStitching(){topStitch=document.getElementById(notifyID+"-topStitch");if(!topStitch){topStitch=document.createElement("div");cssReset(topStitch);topStitch.setAttribute("id",notifyID+"-topStitch")}topStitch.style.backgroundImage="url("+notifyPaths.background+"horizontal_stitch.png)";topStitch.style.backgroundRepeat="repeat-x";topStitch.style.backgroundPosition="0 3px";topStitch.style.position="absolute";topStitch.style.left="0px";topStitch.style.top="0px";topStitch.style.width="100%";topStitch.style.height=barHeight+"px";barContainer.appendChild(topStitch);bottomStitch=document.getElementById(notifyID+"-bottomStitch");if(!bottomStitch){bottomStitch=document.createElement("div");cssReset(bottomStitch);bottomStitch.setAttribute("id",notifyID+"-bottomStitch")}bottomStitch.style.backgroundImage="url("+notifyPaths.background+"horizontal_stitch.png)";bottomStitch.style.backgroundRepeat="repeat-x";bottomStitch.style.backgroundPosition="0 "+(barHeight-5)+"px";bottomStitch.style.position="absolute";bottomStitch.style.left="0px";bottomStitch.style.top="0px";bottomStitch.style.width="100%";bottomStitch.style.height=barHeight+"px";barContainer.appendChild(bottomStitch)}function applyIndentation(){var e,t=4e3,n,r=config.itemShadow==="true"?maxBarHeight+SHARP_INDENT_SHADOW:maxBarHeight;barCanvasBg=document.getElementById(notifyID+"-cvs");if(!barCanvasBg){n=document.createElement("div");cssReset(n);n.style.width="100%";n.style.overflowX="hidden";barContainer.appendChild(n);barCanvasBg=document.createElement("canvas");cssReset(barCanvasBg);barCanvasBg.setAttribute("id",notifyID+"-cvs");barCanvasBg.setAttribute("width",t+"px");barCanvasBg.style.position="absolute";n.appendChild(barCanvasBg)}e=barCanvasBg.getContext("2d");barCanvasBg.setAttribute("height",r+"px");if(e){var i=config.itemShadow==="true"?SHARP_INDENT_SHADOW:0;var s=maxBarHeight-SHARP_INDENT_HEIGHT;e.clearRect(0,0,t,80);e.beginPath();e.moveTo(0,s);for(var o=0;o<=Math.floor(t/SHARP_INDENT_WIDTH);o++){e.lineTo(o*SHARP_INDENT_WIDTH+SHARP_INDENT_WIDTH/2,maxBarHeight);e.lineTo(o*SHARP_INDENT_WIDTH+SHARP_INDENT_WIDTH,s)}e.lineTo(t,0);e.lineTo(0,0);e.closePath();e.lineWidth=1;if(config.itemShadow==="true"){e.shadowBlur=2;e.shadowOffsetX=0;e.shadowOffsetY=2;e.shadowColor="rgba(0,0,0,0.2)"}if(config.backgroundType==="texture"){e.clearRect(0,0,t,maxBarHeight);e.mozImageSmoothingEnabled=false;e.fillStyle=e.createPattern(textureImg,"repeat");e.strokeStyle=e.createPattern(textureImg,"repeat");e.lineJoin="miter";e.stroke();e.fill()}else{if(config.backgroundGradient==="true"){var u=e.createLinearGradient(0,0,0,maxBarHeight);u.addColorStop(0,"#"+config.backgroundColor);u.addColorStop(.5,NSHelper.colorLuminosity(config.backgroundColor,DARK_MIDDLE_PERCENT));u.addColorStop(1,NSHelper.colorLuminosity(config.backgroundColor,DARK_BOTTOM_PERCENT));e.fillStyle=u;e.strokeStyle=u;e.lineJoin="miter";e.stroke();e.fill()}else{e.fillStyle="#"+config.backgroundColor;e.strokeStyle="#"+config.backgroundColor;e.lineJoin="miter";e.stroke();e.fill()}}barCanvasBg.style.zIndex="1";if(config.itemBottom==="true"){barCanvasBg.style["-webkit-transform"]="rotate(180deg)";barCanvasBg.style["-moz-transform"]="rotate(180deg)";barCanvasBg.style["-ms-transform"]="rotate(180deg)";barCanvasBg.style["-o-transform"]="rotate(180deg)";barCanvasBg.style["transform"]="rotate(180deg)"}else{barCanvasBg.style["-webkit-transform"]="rotate(0deg)";barCanvasBg.style["-moz-transform"]="rotate(0deg)";barCanvasBg.style["-ms-transform"]="rotate(0deg)";barCanvasBg.style["-o-transform"]="rotate(0deg)";barCanvasBg.style["transform"]="rotate(0deg)"}if(config.itemBottom==="true"){barCanvasBg.style.top="auto";barCanvasBg.style.bottom="0px"}else{barCanvasBg.style.bottom="auto";barCanvasBg.style.top="0px"}barCanvasBg.style.left=0;barCanvasBg.style.cssFloat="left";barCanvasBg.style.width=t+"px";barCanvasBg.style.height=r+"px"}}function createBarContent(){messageContainer=document.createElement("div");cssReset(messageContainer);messageContainer.setAttribute("id",notifyID+"-messages");messageContainer.style.position="absolute";messageContainer.style.top="0px";messageContainer.style.zIndex=3;messageContainer.style.overflow="hidden";barContainer.appendChild(messageContainer);if(config.backgroundType==="texture"){if(isBGLoaded)createMessageContainers()}else createMessageContainers()}function createMessageContainers(){var e;if(config.itemButton==="true"){for(e=0;e<messageContainer.childNodes.length-1;e++)removeHoverClick(messageContainer.childNodes[e].childNodes[1].childNodes[0])}messageContainer.innerHTML="";for(e=0;e<messages.length;e++){createMessageContainer(e)}currentMessageIndex=0;if(isFontFinished)setupBarContent()}function createMessageContainer(e){var t,n,r,i,s,o,u;t=document.createElement("div");cssReset(t);t.style.position="absolute";if(config.template_name!=="Sharp"){t.style.bottom="auto";t.style.top="0px"}else{if(config.itemBottom==="true"){t.style.bottom="0px";t.style.top="auto"}else{t.style.top="0px";t.style.bottom="auto"}}t.style.cssFloat="left";t.style.opacity="0";messageContainer.appendChild(t);n=document.createElement("div");cssReset(n);n.style.overflow="hidden";n.style.whiteSpace="pre";n.style.position="absolute";n.style.left="0";if(messages[e].linktext.length>0){n.style.marginRight="9px"}else{n.style.marginRight="0px"}n.style["user-select"]="text";n.style["-webkit-user-select"]="text";n.style["-moz-user-select"]="text";n.style["-o-user-select"]="text";n.style["-ms-user-select"]="text";n.innerHTML=messages[e].message;t.appendChild(n);i=document.createElement("a");cssReset(i);i.style.position="absolute";i.style.right="0";if(messages[e].linkhref!=="Link URL"&&messages[e].linkhref!=="#"&&messages[e].linkhref!=="http://#"&&messages[e].linkhref.length>0){i.setAttribute("href",messages[e].linkhref);if(config.itemTarget==="true")i.setAttribute("target","_blank")}else{i.setAttribute("href","#");i.setAttribute("target","_self")}if(config.itemBtnCollapse==="true"){i.addEventListener("click",function(){if(type!=="editable"||targetContainer==="body"){if(type==="published"&&!printScreen&&!preview)setDomainCookie("notifySnack-"+hashID,"closed");closeBar()}},false)}t.appendChild(i);s=document.createElement("div");cssReset(s);i.appendChild(s);u=document.createElement("div");cssReset(u);s.appendChild(u);o=document.createElement("div");cssReset(o);o.style.textAlign="center";o.style.cursor="pointer";o.style.whiteSpace="pre";if(messages[e].linktext.length===0){o.style.width="0"}else{o.style.width=""}s.appendChild(o);r=document.createTextNode(messages[e].linktext);cssReset(r);o.appendChild(r)}function setupBarContent(e){var t,n,r;isContentSetupDone=true;if(barWidth<=SMALL_WIDTH_LIMIT){if(showWatermark){if(wmSize==="16")t=barWidth-16-3*SPACING_ELEMENTE;else if(wmSize==="small")t=barWidth-SMALL_WM-3*SPACING_ELEMENTE;else t=barWidth-LARGE_WM-3*SPACING_ELEMENTE}else{t=barWidth-2*SPACING_ELEMENTE}}else{t=barWidth-2*SPACING_ELEMENTE;if(showWatermark){if(wmSize==="16"){if(16+SPACING_ELEMENTE<tabWidthList[sizeIdx]+SPACING_ELEMENTE&&config.itemClosable==="true")t=t-2*(tabWidthList[sizeIdx]+SPACING_ELEMENTE);else t=t-2*(16+SPACING_ELEMENTE)}else if(wmSize==="small"){if(SMALL_WM+SPACING_ELEMENTE<tabWidthList[sizeIdx]+SPACING_ELEMENTE&&config.itemClosable==="true")t=t-2*(tabWidthList[sizeIdx]+SPACING_ELEMENTE);else t=t-2*(SMALL_WM+SPACING_ELEMENTE)}else{if(LARGE_WM+SPACING_ELEMENTE<tabWidthList[sizeIdx]+SPACING_ELEMENTE&&config.itemClosable==="true")t=t-2*(tabWidthList[sizeIdx]+SPACING_ELEMENTE);else t=t-2*(LARGE_WM+SPACING_ELEMENTE)}}else if(config.itemClosable==="true"){t=t-2*(tabWidthList[sizeIdx]+SPACING_ELEMENTE)}}if(config.itemOpenClosePosition==="left"){if(barWidth<=SMALL_WIDTH_LIMIT)n=SPACING_ELEMENTE;else n=Math.floor((barWidth-t)/2)}else{if(showWatermark){if(barWidth<=SMALL_WIDTH_LIMIT){switch(wmSize){case"16":n=16+2*SPACING_ELEMENTE;break;case"small":n=SMALL_WM+2*SPACING_ELEMENTE;break;case"large":n=LARGE_WM+2*SPACING_ELEMENTE;break}}else n=Math.floor((barWidth-t)/2)}else{if(barWidth<=SMALL_WIDTH_LIMIT)n=SPACING_ELEMENTE;else n=Math.floor((barWidth-t)/2)}}r=barHeight;if(config.template_name==="Sharp"){r=r-SHARP_INDENT_HEIGHT}messageContainer.style.width=t+"px";messageContainer.style.height=r+"px";messageContainer.style.left=n+"px";if(config.template_name!=="Sharp"){messageContainer.style.bottom="auto";messageContainer.style.top="0px"}else{if(config.itemBottom==="true"){messageContainer.style.bottom="0px";messageContainer.style.top="auto"}else{messageContainer.style.top="0px";messageContainer.style.bottom="auto"}}if(typeof e==="number"&&e<messages.length){setupMessage(e,t,r)}else{for(var i=0;i<messages.length;i++){setupMessage(i,t,r)}if(isBarOpen){if(messages.length>1&&!printScreen&&(type!=="editable"||targetContainer!=="wrapper")){cycleMessages()}else{displayMessage(0)}}else{displayMessage(0)}}}function setupMessage(e,t,n){var r=messageContainer.childNodes[e],i=messageContainer.childNodes[e].childNodes[0],s=messageContainer.childNodes[e].childNodes[1],o=messageContainer.childNodes[e].childNodes[1].childNodes[0],u=messageContainer.childNodes[e].childNodes[1].childNodes[0].childNodes[0],a=messageContainer.childNodes[e].childNodes[1].childNodes[0].childNodes[1],f=i.innerHTML;r.style.opacity="0";r.style.filter='alpha(opacity="0")';r.style.display="block";r.style.height=n+"px";r.style.maxWidth=messageContainer.style.width;i.innerHTML="";i.style.width="";i.style.fontFamily=config.itemFontFamily;i.style.fontSize=getFontSize(parseInt(config.itemFontSize))+"px";f=f.replace(/style="color: rgb\([a-zA-Z0-9,\s]*\);"|style="color: #[a-zA-Z0-9]*;"/ig,'style="color: #'+config.linkColor+';"');i.innerHTML=f;i.style.color="#"+config.messageColor;if(config.textShadow==="true"){i.style.textShadow=NSHelper.getColorTone(config.messageColor)==="light"?"0 -1px 0 rgba(0, 0, 0, 0.2)":"0 1px 0 rgba(255, 255, 255, 0.2)";i.style.filter=NSHelper.getColorTone(config.messageColor)==="light"?'progid:DXImageTransform.Microsoft.Shadow(color="#666666", Direction=0, Strength=1")':'progid:DXImageTransform.Microsoft.Shadow(color="#FFFFFF", Direction=0, Strength=1")'}else{i.style.textShadow="";i.style.filter=""}switch(config.itemFontStyle){case"regular":{i.style.fontStyle="normal";i.style.fontWeight="normal"}break;case"Bold":{i.style.fontStyle="normal";i.style.fontWeight="bold"}break;case"Italic":{i.style.fontStyle="italic";i.style.fontWeight="normal"}break;case"ItalicBold":{i.style.fontStyle="italic";i.style.fontWeight="bold"}break}s.style.overflow="hidden";o.style.width="100%";o.style.height="100%";i.style.width=i.clientWidth+1+"px";i.style.textOverflow="ellipsis";if(config.itemFontFamily.indexOf("Alex Brush")>=0||config.itemFontFamily.indexOf("Ole Script")>=0||config.itemFontFamily.indexOf("Playball")>=0)i.style.width=parseInt(i.style.width)+7+"px";if(messages[e].linktext.length>0){s.style.display="block";i.style.marginRight="9px";if(config.itemButton==="true"){if(isHTML5Browser){s.style.border="1px solid "+(config.backgroundTone==="dark"?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)")}else{s.style.border="1px solid "+(config.backgroundTone==="dark"?"#FFF":"#000")}if(config.itemRounded==="true"){s.style.borderRadius="4px";o.style.borderRadius="4px"}setupHoverClick(o,config.backgroundTone);a.style.fontFamily="Arial";if(config.linkColor!==DEFAULT_BLUE){a.style.color="#"+config.linkColor;if(config.textShadow==="true"){a.style.textShadow=NSHelper.getColorTone(config.linkColor)==="light"?"0 -1px 0 rgba(0, 0, 0, 0.2)":"0 1px 0 rgba(255, 255, 255, 0.2)";a.style.filter=NSHelper.getColorTone(config.linkColor)==="light"?'progid:DXImageTransform.Microsoft.Shadow(color="#666666", Direction=0, Strength=1")':'progid:DXImageTransform.Microsoft.Shadow(color="#FFFFFF", Direction=0, Strength=1")'}else{a.style.textShadow="";a.style.filter=""}}else{a.style.color=config.backgroundTone==="dark"?"#FFF":"#000";if(config.textShadow==="true"){a.style.textShadow=config.backgroundTone==="dark"?"0 -1px 0 rgba(0, 0, 0, 0.2)":"0 1px 0 rgba(255, 255, 255, 0.2)";a.style.filter=config.backgroundTone==="dark"?'progid:DXImageTransform.Microsoft.Shadow(color="#666666", Direction=0, Strength=1")':'progid:DXImageTransform.Microsoft.Shadow(color="#FFFFFF", Direction=0, Strength=1")'}else{a.style.textShadow="";a.style.filter=""}}a.style.fontSize=maxBarHeight<=50?"12px":"15px";a.style.fontWeight="normal";a.style.fontStyle="normal";a.style.textDecoration="none";if(maxBarHeight<=40){s.style.width=a.clientWidth+12+"px";s.style.height=a.clientHeight+2+"px"}else if(maxBarHeight<=50){s.style.width=a.clientWidth+12+"px";s.style.height=a.clientHeight+6+"px"}else if(maxBarHeight<=70){s.style.width=a.clientWidth+16+"px";s.style.height=a.clientHeight+8+"px"}else{s.style.width=a.clientWidth+22+"px";s.style.height=a.clientHeight+14+"px"}if((n-s.clientHeight-2)%2>0){s.style.width="";a.style.fontSize=parseInt(a.style.fontSize)-1+"px";if(maxBarHeight<=40){s.style.width=a.clientWidth+12+"px";s.style.height=a.clientHeight+2+"px"}else if(maxBarHeight<=50){s.style.width=a.clientWidth+12+"px";s.style.height=a.clientHeight+6+"px"}else if(maxBarHeight<=70){s.style.width=a.clientWidth+16+"px";s.style.height=a.clientHeight+8+"px"}else{s.style.width=a.clientWidth+22+"px";s.style.height=a.clientHeight+14+"px"}}u.style.width="100%";u.style.height="1px";u.style.backgroundColor="#FFF";u.style.opacity="0.2";u.style.filter="alpha(opacity=20)";a.style.width="100%";if(isMacOS){a.style.marginTop="0px";a.style.lineHeight=s.clientHeight-4+"px"}else{a.style.marginTop=Math.floor((s.clientHeight-a.clientHeight)/2)-2+"px"}if(messages[e].linktext===messages[e].linktext.toUpperCase()){a.style.marginTop=parseInt(a.style.marginTop)+1+"px"}s.style.marginTop=Math.ceil((n-s.clientHeight-2)/2)+"px"}else{s.style.border="";removeHoverClick(o);a.style.fontFamily=config.itemFontFamily;a.style.color="#"+config.linkColor;a.style.fontSize=getFontSize(parseInt(config.itemFontSize))+"px";a.style.textDecoration="underline";switch(config.itemFontStyle){case"regular":{a.style.fontStyle="normal";a.style.fontWeight="normal"}break;case"Bold":{a.style.fontStyle="normal";a.style.fontWeight="bold"}break;case"Italic":{a.style.fontStyle="italic";a.style.fontWeight="normal"}break;case"ItalicBold":{a.style.fontStyle="italic";a.style.fontWeight="bold"}break}if(a.style.fontFamily.indexOf("Bree Serif")===1){a.style.lineHeight="normal";s.style.marginTop=Math.floor((n-i.clientHeight)/2)-2+"px"}else{s.style.marginTop=config.template_name==="Stitch"?"5px":"0px";a.style.lineHeight=config.template_name==="Sharp"?barHeight-SHARP_INDENT_HEIGHT+"px":config.template_name==="Stitch"?maxBarHeight-10+"px":barHeight+"px"}}}else{s.style.width="0px";s.style.display="none";i.style.marginRight="0px"}if(i.style.fontFamily.indexOf("Bree Serif")===1){i.style.lineHeight="normal";i.style.marginTop=Math.floor((n-i.clientHeight)/2)-2+"px"}else{i.style.marginTop=config.template_name==="Stitch"?"5px":"0px";i.style.lineHeight=config.template_name==="Sharp"?barHeight-SHARP_INDENT_HEIGHT+"px":config.template_name==="Stitch"?maxBarHeight-10+"px":barHeight+"px"}i.style.maxWidth=t-parseInt(i.style.marginRight)-s.clientWidth-(config.itemButton==="true"?2:0)+"px";r.style.width=i.clientWidth+parseInt(i.style.marginRight)+s.clientWidth+(config.itemButton==="true"?2:0)+"px";r.style.left=Math.floor((t-r.clientWidth-(config.itemButton==="true"?2:0))/2)+"px";r.style.display="none";if(isRedraw||printScreen){messageContainer.childNodes[currentMessageIndex].style.opacity="1";r.style.filter='alpha(opacity="100")'}}function getFontSize(e){if(!config["default"]||!config["default"].itemFontSize)return e;var t,n=0,r=parseInt(config["default"].itemFontSize),i=false;if(e!==r){return e}else{t=Math.max(Math.floor((maxBarHeight-FONT_HEIGHT_LIMIT)/10),0);while(!i){if(FONT_SIZE_LIST[n]===r){i=true}else{if(n===FONT_SIZE_LIST.length-1)break;else n++}}if(!i)return e;else{if(n+t>=FONT_SIZE_LIST.length-1)return FONT_SIZE_LIST[FONT_SIZE_LIST.length-1];else if(n+t<=0)return FONT_SIZE_LIST[0];else return FONT_SIZE_LIST[n+t]}}}function createOpenButton(){openTabContainer=document.createElement("div");cssReset(openTabContainer);openTabContainer.setAttribute("id",notifyID+"-open");openTabContainer.style.zIndex="0";if(config.itemBottom==="true"){openTabContainer.style["-webkit-transition-property"]="bottom";openTabContainer.style["-moz-transition-property"]="bottom";openTabContainer.style["-ms-transition-property"]="bottom";openTabContainer.style["-o-transition-property"]="bottom";openTabContainer.style["transition-property"]="bottom";openTabContainer.style.position=targetContainer==="body"?"fixed":preview&&targetContainer==="inner"?"fixed":"absolute"}else{openTabContainer.style["-webkit-transition-property"]="top";openTabContainer.style["-moz-transition-property"]="top";openTabContainer.style["-ms-transition-property"]="top";openTabContainer.style["-o-transition-property"]="top";openTabContainer.style["transition-property"]="top";openTabContainer.style.position=targetContainer==="body"&&config.itemOntop==="true"?"fixed":preview&&targetContainer==="inner"&&config.itemOntop==="true"?"fixed":"absolute"}bar.appendChild(openTabContainer);NSHelper.setUnselectable(openTabContainer);openTab=document.createElement("div");cssReset(openTab);openTab.style.overflow="visible";openTab.style.position="absolute";openTabContainer.appendChild(openTab);NSHelper.setUnselectable(openTab);openTabBgCvs=document.createElement("canvas");cssReset(openTabBgCvs);openTabBg=document.createElement("div");cssReset(openTabBg);openTabBg.style.position="absolute";openTabBgCvs.style.position="absolute";openTab.appendChild(openTabBg);openTab.appendChild(openTabBgCvs);NSHelper.setUnselectable(openTabBg);NSHelper.setUnselectable(openTabBgCvs);tabOpenLeftStitch=document.createElement("div");cssReset(tabOpenLeftStitch);tabOpenLeftStitch.style.position="absolute";openTab.appendChild(tabOpenLeftStitch);tabOpenRightStitch=document.createElement("div");cssReset(tabOpenRightStitch);tabOpenRightStitch.style.position="absolute";openTab.appendChild(tabOpenRightStitch);tabOpenBottomStitch=document.createElement("div");cssReset(tabOpenBottomStitch);tabOpenBottomStitch.style.position="absolute";openTab.appendChild(tabOpenBottomStitch);openBtnSymbol=document.createElement("div");cssReset(openBtnSymbol);openBtnSymbol.style.position="absolute";openBtnSymbol.style.overflow="hidden";openTab.appendChild(openBtnSymbol);if(type!=="editable"||targetContainer==="body"){if(!isMobileDevice){if(openBtnSymbol.addEventListener)openBtnSymbol.addEventListener("click",function(){if(type==="published"&&!printScreen&&!preview)setDomainCookie("notifySnack-"+hashID,"opened");autoClose=false;openBar()},false);else if(openBtnSymbol.attachEvent)openBtnSymbol.attachEvent("onclick",function(){if(type==="published"&&!printScreen&&!preview)setDomainCookie("notifySnack-"+hashID,"opened");autoClose=false;openBar()})}else{openBtnSymbol.addEventListener("touchstart",touchHandler,false);openBtnSymbol.addEventListener("touchmove",touchHandler,false);openBtnSymbol.addEventListener("touchend",touchHandler,false)}}NSHelper.setUnselectable(openBtnSymbol);var e=document.createElement("div");cssReset(e);e.style.position="absolute";e.style.width="100%";e.style.height="100%";openBtnSymbol.appendChild(e);var t=document.createElement("div");cssReset(t);t.style.width="100%";t.style.height="1px";t.style.backgroundColor="#FFF";t.style.opacity="0.2";t.style.filter="alpha(opacity=20)";t.style.position="absolute";t.style.top=0;openBtnSymbol.appendChild(t);var n=document.createElement("div");cssReset(n);n.style.width="100%";n.style.height="100%";e.appendChild(n);NSHelper.setUnselectable(n);setupOpenButton()}function setupOpenButton(){var e=config.itemShadow==="true"?SHARP_INDENT_SHADOW:0,t=e;switch(config.barStyle){case"style2":tabExtraHeight=STYLE2_BOTTOM_HEIGHT;break;case"style3":tabExtraHeight=STYLE3_BOTTOM_HEIGHT;break;case"style4":tabExtraHeight=STYLE4_BOTTOM_HEIGHT;break;case"style5":tabExtraHeight=STYLE5_BOTTOM_HEIGHT;break;case"style6":tabExtraHeight=STYLE6_BOTTOM_HEIGHT;break;default:tabExtraHeight=0;break}if(config.itemOpenClosePosition==="right"){openTabContainer.style.left="";openTabContainer.style.right="0px";openTab.style.right="";openTab.style.left="0px"}else{openTabContainer.style.right="";openTabContainer.style.left="0px";openTab.style.left="";openTab.style.right="0px"}openTabContainer.style.width=SPACING_ELEMENTE+tabWidthList[sizeIdx]+"px";openTab.style.width=tabWidthList[sizeIdx]+"px";if(type==="editable"&&targetContainer!=="body"){openTabContainer.style.zIndex="-1";if(config.itemBottom==="true"){openTabContainer.style.top="auto";openTabContainer.style.bottom=config.template_name==="Sharp"?maxBarHeight-SHARP_INDENT_HEIGHT-SHARP_INDENT_SHADOW+"px":maxBarHeight+"px"}else{openTabContainer.style.bottom="auto";openTabContainer.style.top=config.template_name==="Sharp"?maxBarHeight-SHARP_INDENT_HEIGHT+"px":maxBarHeight+"px"}openTabContainer.style.height=config.template_name==="Sharp"?tabHeightList[sizeIdx]+tabExtraHeight+e+SHARP_INDENT_HEIGHT+"px":tabHeightList[sizeIdx]+tabExtraHeight+e+"px"}else{if(config.itemBottom==="true"){openTabContainer.style.top="auto";openTabContainer.style.bottom=-(tabHeightList[sizeIdx]+tabExtraHeight+e)+"px"}else{openTabContainer.style.bottom="auto";openTabContainer.style.top=-(tabHeightList[sizeIdx]+tabExtraHeight+e)+"px"}openTabContainer.style.height=tabHeightList[sizeIdx]+tabExtraHeight+e+"px"}openTab.style.height=openTabContainer.style.height;if(config.itemBottom==="true"){openTab.style["-webkit-transform"]="rotate(180deg)";openTab.style["-moz-transform"]="rotate(180deg)";openTab.style["-ms-transform"]="rotate(180deg)";openTab.style["-o-transform"]="rotate(180deg)";openTab.style["transform"]="rotate(180deg)"}else{openTab.style["-webkit-transform"]="rotate(0deg)";openTab.style["-moz-transform"]="rotate(0deg)";openTab.style["-ms-transform"]="rotate(0deg)";openTab.style["-o-transform"]="rotate(0deg)";openTab.style["transform"]="rotate(0deg)"}if(config.barStyle!=="style1"&&config.barStyle!=="style7"){openTabBg.style.display="none";openTabBgCvs.setAttribute("width",tabWidthList[sizeIdx]+2*e);openTabBgCvs.style.left=config.itemShadow==="true"?-e+"px":0;openTabBgCvs.style.display="block";if(type==="editable"&&targetContainer!=="body"&&config.template_name==="Sharp"){openTabBgCvs.setAttribute("height",tabHeightList[sizeIdx]+tabExtraHeight+e+SHARP_INDENT_HEIGHT);drawButtonBg(openTabBgCvs,tabWidthList[sizeIdx],tabHeightList[sizeIdx]+tabExtraHeight+e+SHARP_INDENT_HEIGHT)}else{openTabBgCvs.setAttribute("height",tabHeightList[sizeIdx]+tabExtraHeight+e);drawButtonBg(openTabBgCvs,tabWidthList[sizeIdx],tabHeightList[sizeIdx]+tabExtraHeight+e)}}else{openTabBgCvs.style.display="none";openTabBg.style.display="block";if(type==="editable"&&targetContainer!=="body")setButtonBg(openTabBg,tabWidthList[sizeIdx],config.template_name==="Sharp"?tabHeightList[sizeIdx]+SHARP_INDENT_HEIGHT:tabHeightList[sizeIdx]);else setButtonBg(openTabBg,tabWidthList[sizeIdx],tabHeightList[sizeIdx])}openTabBg.style.width=tabWidthList[sizeIdx]+"px";openTabBgCvs.style.width=tabWidthList[sizeIdx]+2*e+"px";if(config.template_name==="Stitch"){tabOpenLeftStitch.style.background="url("+notifyPaths.background+"vertical_left_stitch.png"+") repeat-y";tabOpenRightStitch.style.background="url("+notifyPaths.background+"vertical_right_stitch.png"+") repeat-y";if(config.barStyle==="style1"||config.barStyle==="style7")tabOpenBottomStitch.style.background="url("+notifyPaths.background+"horizontal_stitch.png"+") repeat-x";else tabOpenBottomStitch.style.background="";switch(config.barStyle){case"style2":setStitchingSize(tabWidthList[sizeIdx],tabHeightList[sizeIdx]);break;case"style3":setStitchingSize(tabWidthList[sizeIdx],tabHeightList[sizeIdx]);break;case"style4":setStitchingSize(tabWidthList[sizeIdx],tabHeightList[sizeIdx]+tabExtraHeight-t);break;case"style5":setStitchingSize(tabWidthList[sizeIdx],tabHeightList[sizeIdx]+tabExtraHeight-t);break;case"style6":setStitchingSize(tabWidthList[sizeIdx],tabHeightList[sizeIdx]+tabExtraHeight-t);break;default:setStitchingSize(tabWidthList[sizeIdx],tabHeightList[sizeIdx])}}else if(tabOpenLeftStitch&&tabOpenRightStitch&&tabOpenBottomStitch){tabOpenLeftStitch.style.width=tabOpenRightStitch.style.width=tabOpenBottomStitch.style.width="0";tabOpenLeftStitch.style.height=tabOpenRightStitch.style.height=tabOpenBottomStitch.style.height="0";tabOpenLeftStitch.style.background=tabOpenRightStitch.style.background=tabOpenBottomStitch.style.background=""}openBtnSymbol.style.width=openBtnSymbol.style.height=BTN_SIZE_LIST[sizeIdx]+"px";openBtnSymbol.style.cursor="pointer";if(isHTML5Browser){openBtnSymbol.style.border="1px solid "+(config.backgroundTone==="dark"?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)")}else{openBtnSymbol.style.border="1px solid "+(config.backgroundTone==="dark"?"#FFF":"#000")}if(config.itemRounded==="true"){openBtnSymbol.style.borderRadius="4px";openBtnSymbol.childNodes[0].style.borderRadius="4px"}else{openBtnSymbol.style.borderRadius="0px";openBtnSymbol.childNodes[0].style.borderRadius="0px"}setupHoverClick(openBtnSymbol.childNodes[0],config.backgroundTone);openBtnSymbol.style.left=Math.floor((tabWidthList[sizeIdx]-BTN_SIZE_LIST[sizeIdx]-2)/2)+"px";if(config.template_name==="Stitch"&&(config.barStyle==="style1"||config.barStyle==="style7")){openBtnSymbol.style.bottom="auto";openBtnSymbol.style.top=Math.floor((tabHeightList[sizeIdx]+tabExtraHeight/2-BTN_SIZE_LIST[sizeIdx]-2-5)/2)+"px"}else{openBtnSymbol.style.top=Math.floor((tabHeightList[sizeIdx]+tabExtraHeight/2-BTN_SIZE_LIST[sizeIdx]-2)/2)+"px"}if(type==="editable"&&targetContainer!=="body"&&config.template_name==="Sharp"){openBtnSymbol.style.top=parseInt(openBtnSymbol.style.top)+SHARP_INDENT_HEIGHT+"px"}var n=openBtnSymbol.childNodes[0].childNodes[0];n.style.backgroundImage="url("+downSymbol+")";n.style.backgroundPosition="center center";n.style.backgroundRepeat="no-repeat";if(openDelay!==0&&!(type==="editable"&&targetContainer!=="body"&&!preview&&!printScreen)){slide(openBtnInterval,openTabContainer,tabHeightList[sizeIdx]+tabExtraHeight+t,SLIDE_SPEED,config.itemUsebounce==="true",-1,function(){clearInterval(openBtnInterval);if(closeDelay>0){autoClose=true}else{autoClose=false}if(openDelay>0)openTimer=setTimeout(openBar,openDelay*1e3)})}}function setStitchingSize(e,t){var n=10,r=Math.floor((e-4)/n)*n,i=Math.floor(t/n)*n;if(tabOpenLeftStitch&&tabOpenRightStitch&&tabOpenBottomStitch){tabOpenLeftStitch.style.width=tabOpenRightStitch.style.width=e+"px";tabOpenLeftStitch.style.height=tabOpenRightStitch.style.height=i+"px";tabOpenLeftStitch.style.top=tabOpenRightStitch.style.top=Math.floor((t-i)/2)+"px";tabOpenLeftStitch.style.left=tabOpenRightStitch.style.left="0";tabOpenBottomStitch.style.width=r+"px";tabOpenBottomStitch.style.height=t+"px";tabOpenBottomStitch.style.left=Math.floor((e-r)/2)+"px";tabOpenBottomStitch.style.bottom="auto";tabOpenBottomStitch.style.top="0";tabOpenLeftStitch.style.backgroundPosition="3px 0";tabOpenRightStitch.style.backgroundPosition=e-5+"px 0";tabOpenBottomStitch.style.backgroundPosition="0 "+(t-5)+"px"}if(tabCloseLeftStitch&&tabCloseRightStitch&&tabCloseBottomStitch){tabCloseLeftStitch.style.width=tabCloseRightStitch.style.width=e+"px";tabCloseLeftStitch.style.height=tabCloseRightStitch.style.height=i+"px";tabCloseLeftStitch.style.bottom="auto";tabCloseLeftStitch.style.top=tabCloseRightStitch.style.top=Math.floor((t-i)/2)+"px";tabCloseLeftStitch.style.left=tabCloseRightStitch.style.left="0";tabCloseBottomStitch.style.width=r+"px";tabCloseBottomStitch.style.height=t+"px";tabCloseBottomStitch.style.left=Math.floor((e-r)/2)+"px";tabCloseBottomStitch.style.bottom="auto";tabCloseBottomStitch.style.top="0";tabCloseLeftStitch.style.backgroundPosition="3px 0";tabCloseRightStitch.style.backgroundPosition=e-5+"px 0";tabCloseBottomStitch.style.backgroundPosition="0 "+(t-5)+"px"}}function createCloseButton(){closeTabContainer=document.createElement("div");cssReset(closeTabContainer);closeTabContainer.setAttribute("id",notifyID+"-close");closeTabContainer.style.zIndex="1";closeTabContainer.style.position="absolute";barContainer.appendChild(closeTabContainer);NSHelper.setUnselectable(closeTabContainer);closeTab=document.createElement("div");cssReset(closeTab);closeTab.style.overflow="visible";closeTab.style.position="absolute";closeTabContainer.appendChild(closeTab);NSHelper.setUnselectable(closeTab);closeTabBgCvs=document.createElement("canvas");cssReset(closeTabBgCvs);closeTabBg=document.createElement("div");cssReset(closeTabBg);closeTabBg.style.position="absolute";closeTabBgCvs.style.position="absolute";closeTab.appendChild(closeTabBg);closeTab.appendChild(closeTabBgCvs);NSHelper.setUnselectable(closeTabBg);NSHelper.setUnselectable(closeTabBgCvs);tabCloseLeftStitch=document.createElement("div");cssReset(tabCloseLeftStitch);tabCloseLeftStitch.style.position="absolute";closeTab.appendChild(tabCloseLeftStitch);tabCloseRightStitch=document.createElement("div");cssReset(tabCloseRightStitch);tabCloseRightStitch.style.position="absolute";closeTab.appendChild(tabCloseRightStitch);tabCloseBottomStitch=document.createElement("div");cssReset(tabCloseBottomStitch);tabCloseBottomStitch.style.position="absolute";closeTab.appendChild(tabCloseBottomStitch);closeBtnSymbol=document.createElement("div");cssReset(closeBtnSymbol);closeBtnSymbol.style.position="absolute";closeBtnSymbol.style.overflow="hidden";closeTab.appendChild(closeBtnSymbol);if(type!=="editable"||targetContainer==="body"){if(!isMobileDevice){if(closeBtnSymbol.addEventListener)closeBtnSymbol.addEventListener("click",function(){if(type==="published"&&!printScreen&&!preview)setDomainCookie("notifySnack-"+hashID,"closed");closeBar()},false);else if(closeBtnSymbol.attachEvent)closeBtnSymbol.attachEvent("onclick",function(){if(type==="published"&&!printScreen&&!preview)setDomainCookie("notifySnack-"+hashID,"closed");closeBar()})}else{closeBtnSymbol.addEventListener("touchstart",touchHandler,false);closeBtnSymbol.addEventListener("touchmove",touchHandler,false);closeBtnSymbol.addEventListener("touchend",touchHandler,false)}}NSHelper.setUnselectable(closeBtnSymbol);var e=document.createElement("div");cssReset(e);e.style.width="100%";e.style.height="100%";e.style.position="absolute";closeBtnSymbol.appendChild(e);var t=document.createElement("div");cssReset(t);t.style.width="100%";t.style.height="1px";t.style.backgroundColor="#FFF";t.style.opacity="0.2";t.style.filter="alpha(opacity=20)";t.style.position="absolute";t.style.top=0;closeBtnSymbol.appendChild(t);var n=document.createElement("div");cssReset(n);n.style.width="100%";n.style.height="100%";NSHelper.setUnselectable(n);e.appendChild(n);setupCloseButton(isCloseBtnOutside)}function setupCloseButton(e){var t=config.itemShadow==="true"?SHARP_INDENT_SHADOW:0,n=t;switch(config.barStyle){case"style2":tabExtraHeight=STYLE2_BOTTOM_HEIGHT;break;case"style3":tabExtraHeight=STYLE3_BOTTOM_HEIGHT;break;case"style4":tabExtraHeight=STYLE4_BOTTOM_HEIGHT;break;case"style5":tabExtraHeight=STYLE5_BOTTOM_HEIGHT;break;case"style6":tabExtraHeight=STYLE6_BOTTOM_HEIGHT;break;default:tabExtraHeight=0;break}if(config.itemOpenClosePosition==="right"){closeTabContainer.style.left="";closeTabContainer.style.right="0px";closeTab.style.right="";closeTab.style.left="0px"}else{closeTabContainer.style.right="";closeTabContainer.style.left="0px";closeTab.style.left="";closeTab.style.right="0px"}closeTabContainer.style.width=SPACING_ELEMENTE+tabWidthList[sizeIdx]+"px";closeTab.style.width=tabWidthList[sizeIdx]+"px";if(e){closeTabContainer.style.zIndex="-1";if(type==="editable"&&targetContainer!=="body"){if(config.itemBottom==="true"){closeTabContainer.style.top="auto";closeTabContainer.style.bottom=config.template_name==="Sharp"?maxBarHeight-SHARP_INDENT_HEIGHT-SHARP_INDENT_SHADOW+"px":maxBarHeight+"px"}else{closeTabContainer.style.bottom="auto";closeTabContainer.style.top=config.template_name==="Sharp"?maxBarHeight-SHARP_INDENT_HEIGHT+"px":maxBarHeight+"px"}closeTabContainer.style.height=config.template_name==="Sharp"?tabHeightList[sizeIdx]+tabExtraHeight+t+SHARP_INDENT_HEIGHT+"px":tabHeightList[sizeIdx]+tabExtraHeight+t+"px";closeTab.style.height=closeTabContainer.style.height}else{if(config.itemBottom==="true"){closeTabContainer.style.top="auto";closeTabContainer.style.bottom=config.template_name==="Sharp"?maxBarHeight-SHARP_INDENT_HEIGHT-SHARP_INDENT_SHADOW+"px":maxBarHeight+"px"}else{closeTabContainer.style.bottom="auto";closeTabContainer.style.top=config.template_name==="Sharp"?maxBarHeight-SHARP_INDENT_HEIGHT+"px":maxBarHeight+"px"}closeTabContainer.style.height=config.template_name==="Sharp"?tabHeightList[sizeIdx]+tabExtraHeight+t+"px":tabHeightList[sizeIdx]+tabExtraHeight+t+"px";closeTab.style.height=closeTabContainer.style.height}if(config.barStyle!=="style1"&&config.barStyle!=="style7"){closeTabBg.style.display="none";closeTabBgCvs.style.display="block";closeTabBgCvs.setAttribute("width",tabWidthList[sizeIdx]+2*t);closeTabBgCvs.style.left=config.itemShadow==="true"?-t+"px":0;if(config.template_name==="Sharp"){closeTabBgCvs.setAttribute("height",tabHeightList[sizeIdx]+tabExtraHeight+t+SHARP_INDENT_HEIGHT);drawButtonBg(closeTabBgCvs,tabWidthList[sizeIdx],tabHeightList[sizeIdx]+tabExtraHeight+t+SHARP_INDENT_HEIGHT)}else{closeTabBgCvs.setAttribute("height",tabHeightList[sizeIdx]+tabExtraHeight+t);drawButtonBg(closeTabBgCvs,tabWidthList[sizeIdx],tabHeightList[sizeIdx]+tabExtraHeight+t)}}else{closeTabBgCvs.style.display="none";closeTabBg.style.display="block";setButtonBg(closeTabBg,tabWidthList[sizeIdx],config.template_name==="Sharp"?tabHeightList[sizeIdx]+SHARP_INDENT_HEIGHT:tabHeightList[sizeIdx])}closeTabBg.style.width=tabWidthList[sizeIdx]+"px";closeTabBgCvs.style.width=tabWidthList[sizeIdx]+2*t+"px";closeTabBgCvs.style.display="block";if(config.template_name==="Stitch"){tabCloseLeftStitch.style.display=tabCloseRightStitch.style.display=tabCloseBottomStitch.style.display="block";tabCloseLeftStitch.style.background="url("+notifyPaths.background+"vertical_left_stitch.png"+") repeat-y";tabCloseRightStitch.style.background="url("+notifyPaths.background+"vertical_right_stitch.png"+") repeat-y";if(config.barStyle==="style1"||config.barStyle==="style7")tabCloseBottomStitch.style.background="url("+notifyPaths.background+"horizontal_stitch.png"+") repeat-x";else tabCloseBottomStitch.style.background="";switch(config.barStyle){case"style2":setStitchingSize(tabWidthList[sizeIdx],tabHeightList[sizeIdx]);break;case"style3":setStitchingSize(tabWidthList[sizeIdx],tabHeightList[sizeIdx]);break;case"style4":setStitchingSize(tabWidthList[sizeIdx],tabHeightList[sizeIdx]+tabExtraHeight-n);break;case"style5":setStitchingSize(tabWidthList[sizeIdx],tabHeightList[sizeIdx]+tabExtraHeight-n);break;case"style6":setStitchingSize(tabWidthList[sizeIdx],tabHeightList[sizeIdx]+tabExtraHeight-n);break;default:setStitchingSize(tabWidthList[sizeIdx],tabHeightList[sizeIdx])}}else if(tabCloseLeftStitch&&tabCloseRightStitch&&tabCloseBottomStitch){tabCloseLeftStitch.style.width=tabCloseRightStitch.style.width=tabCloseBottomStitch.style.width="0";tabCloseLeftStitch.style.height=tabCloseRightStitch.style.height=tabCloseBottomStitch.style.height="0";tabCloseLeftStitch.style.background=tabCloseRightStitch.style.background=tabCloseBottomStitch.style.background="";tabCloseLeftStitch.style.display=tabCloseRightStitch.style.display=tabCloseBottomStitch.style.display="none"}if(!isBarOpen){if(config.itemBottom==="true"){barContainer.style.top="auto";barContainer.style.bottom=-(maxBarHeight+shadowHeight+parseInt(closeTabContainer.style.height)+shadowHeight)+"px"}else{barContainer.style.bottom="auto";barContainer.style.top=-(maxBarHeight+shadowHeight+parseInt(closeTabContainer.style.height)+shadowHeight)+"px"}}}else{if(!isBarOpen){if(config.itemBottom==="true"){barContainer.style.top="auto";barContainer.style.bottom=-(maxBarHeight+shadowHeight)+"px"}else{barContainer.style.bottom="auto";barContainer.style.top=-(maxBarHeight+shadowHeight)+"px"}}tabCloseLeftStitch.style.display=tabCloseRightStitch.style.display=tabCloseBottomStitch.style.display="none";closeTabContainer.style.zIndex="1";closeTabBg.style.display="none";closeTabBgCvs.style.display="none";if(config.itemBottom==="true"){closeTabContainer.style.top="auto";closeTabContainer.style.bottom=config.template_name==="Sharp"?-(SHARP_INDENT_SHADOW+2)+"px":0+"px"}else{closeTabContainer.style.bottom="auto";closeTabContainer.style.top="0px"}closeTab.style.height=closeTabContainer.style.height=(config.itemBorder==="true"?maxBarHeight-2:maxBarHeight)+"px";if(config.barStyle!=="style1"&&config.barStyle!=="style7"){closeTabBgCvs.setAttribute("width",tabWidthList[sizeIdx]);closeTabBgCvs.setAttribute("height",barHeight)}}if(config.itemBottom==="true"){closeTab.style["-webkit-transform"]="rotate(180deg)";closeTab.style["-moz-transform"]="rotate(180deg)";closeTab.style["-ms-transform"]="rotate(180deg)";closeTab.style["-o-transform"]="rotate(180deg)";closeTab.style["transform"]="rotate(180deg)";if(!isIE9)closeTab.style["filter"]="progid:DXImageTransform.Microsoft.BasicImage(rotation=2)"}else{closeTab.style["-webkit-transform"]="rotate(0deg)";closeTab.style["-moz-transform"]="rotate(0deg)";closeTab.style["-ms-transform"]="rotate(0deg)";closeTab.style["-o-transform"]="rotate(0deg)";closeTab.style["transform"]="rotate(0deg)";if(!isIE9)closeTab.style["filter"]="progid:DXImageTransform.Microsoft.BasicImage(rotation=0)"}closeBtnSymbol.style.width=closeBtnSymbol.style.height=BTN_SIZE_LIST[sizeIdx]+"px";closeBtnSymbol.style.cursor="pointer";if(isHTML5Browser){closeBtnSymbol.style.border="1px solid "+(config.backgroundTone==="dark"?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)")}else{closeBtnSymbol.style.border="1px solid "+(config.backgroundTone==="dark"?"#FFF":"#000")}if(config.itemRounded==="true"){closeBtnSymbol.style.borderRadius="4px";closeBtnSymbol.childNodes[0].style.borderRadius="4px"}else{closeBtnSymbol.style.borderRadius="0px";closeBtnSymbol.childNodes[0].style.borderRadius="0px"}setupHoverClick(closeBtnSymbol.childNodes[0],config.backgroundTone);closeBtnSymbol.style.left=Math.floor((tabWidthList[sizeIdx]-BTN_SIZE_LIST[sizeIdx]-2)/2)+"px";if(e){if(config.template_name==="Stitch"&&(config.barStyle==="style1"||config.barStyle==="style7")){closeBtnSymbol.style.bottom="auto";closeBtnSymbol.style.top=Math.floor((tabHeightList[sizeIdx]+tabExtraHeight/2-BTN_SIZE_LIST[sizeIdx]-2-5)/2)+"px"}else if(config.template_name==="Sharp"){closeBtnSymbol.style.bottom="auto";closeBtnSymbol.style.top=Math.floor((tabHeightList[sizeIdx]+tabExtraHeight/2-BTN_SIZE_LIST[sizeIdx]-2)/2)+SHARP_INDENT_HEIGHT+"px"}else{closeBtnSymbol.style.bottom="auto";closeBtnSymbol.style.top=Math.floor((tabHeightList[sizeIdx]+tabExtraHeight/2-BTN_SIZE_LIST[sizeIdx]-2)/2)+"px"}}else{if(config.itemBottom==="true"){closeBtnSymbol.style.top="auto";closeBtnSymbol.style.bottom=Math.ceil(((config.itemBorder==="true"?maxBarHeight-2:maxBarHeight)-BTN_SIZE_LIST[sizeIdx]-2)/2)+"px"}else{closeBtnSymbol.style.bottom="auto";closeBtnSymbol.style.top=Math.ceil(((config.itemBorder==="true"?maxBarHeight-2:maxBarHeight)-BTN_SIZE_LIST[sizeIdx]-2)/2)+"px"}if(config.template_name==="Sharp"){if(config.itemBottom==="true"){closeBtnSymbol.style.top="auto";closeBtnSymbol.style.bottom=Math.ceil(((config.itemBorder==="true"?maxBarHeight-2:maxBarHeight)-BTN_SIZE_LIST[sizeIdx]-5-SHARP_INDENT_HEIGHT)/2)+"px"}else{closeBtnSymbol.style.bottom="auto";closeBtnSymbol.style.top=Math.ceil(((config.itemBorder==="true"?maxBarHeight-2:maxBarHeight)-BTN_SIZE_LIST[sizeIdx]-SHARP_INDENT_HEIGHT)/2)+"px"}}}var r=closeBtnSymbol.childNodes[0].childNodes[0];r.style.backgroundImage="url("+upSymbol+")";r.style.backgroundPosition="center center";r.style.backgroundRepeat="no-repeat";if(config.backgroundTone==="dark")r.style.marginTop="-1px";else r.style.marginTop="0px";if(!isBarOpen&&isFirstSlide&&openDelay===0&&!(type==="editable"&&targetContainer!=="body"&&!preview&&!printScreen)){isFirstSlide=false;if(isCloseBtnOutside){if(config.itemBottom==="true"){barContainer.style.top="auto";barContainer.style.bottom=-(maxBarHeight+shadowHeight+parseInt(closeTabContainer.style.height)+shadowHeight)+"px"}else{barContainer.style.bottom="auto";barContainer.style.top=-(maxBarHeight+shadowHeight+parseInt(closeTabContainer.style.height)+shadowHeight)+"px"}}else{if(config.itemBottom==="true"){barContainer.style.top="auto";barContainer.style.bottom=-(maxBarHeight+shadowHeight)+"px"}else{barContainer.style.bottom="auto";barContainer.style.top=-(maxBarHeight+shadowHeight)+"px"}}if(config.itemBottom==="true"){slide(barInterval,barContainer,Math.abs(parseInt(barContainer.style.bottom)),SLIDE_SPEED,config.itemUsebounce==="true",config.itemPushing==="true"&&pusher?config.template_name==="Sharp"?maxBarHeight-SHARP_INDENT_HEIGHT:maxBarHeight:-1,function(){isBarOpen=true;if(closeDelay>0){closeTimer=setTimeout(closeBar,closeDelay*1e3)}})}else{slide(barInterval,barContainer,Math.abs(parseInt(barContainer.style.top)),SLIDE_SPEED,config.itemUsebounce==="true",config.itemPushing==="true"&&pusher?config.template_name==="Sharp"?maxBarHeight-SHARP_INDENT_HEIGHT:maxBarHeight:-1,function(){isBarOpen=true;if(closeDelay>0){closeTimer=setTimeout(closeBar,closeDelay*1e3)}})}}}function drawButtonBg(e,t,n){var r=e.getContext("2d");if(r){var i,s=config.itemShadow==="true"?SHARP_INDENT_SHADOW:0,o=s;if(config.itemShadow==="true")t+=2*s;r.clearRect(0,0,t,n);r.beginPath();switch(config.barStyle){case"style1":{i=n-s;r.moveTo(o,i);r.lineTo(t-o,i)}break;case"style2":{i=n-s-STYLE2_BOTTOM_HEIGHT;r.moveTo(o,i);var u=maxBarHeight<49?.85:.95;if(config.itemShadow==="false")u=u+.1;if(maxBarHeight<49)r.bezierCurveTo(t/3,n*u,2*t/3,n*u,t-o,i);else r.bezierCurveTo(t/3,n*u,2*t/3,n*u,t-o,i)}break;case"style3":{i=n-s-STYLE3_BOTTOM_HEIGHT;r.moveTo(o,i);r.lineTo(t/2,n-s);r.lineTo(t-o,i)}break;case"style4":{i=n-s-STYLE4_BOTTOM_HEIGHT;r.moveTo(o,n-s);r.lineTo(t/2,i);r.lineTo(t-o,n-s)}break;case"style5":{i=n-s-STYLE5_BOTTOM_HEIGHT;r.moveTo(o,n-s);var a=SHARP_INDENT_WIDTH,f=Math.floor((t-2*o)/a),l=t-2*o-f*a,c=a/2+l/2;if(l>4){a=SHARP_INDENT_WIDTH+2;f=Math.floor((t-2*o)/a),l=t-2*o-f*a,c=a/2+l/2;if(l>4){a=SHARP_INDENT_WIDTH-2;f=Math.floor((t-2*o)/a),l=t-2*o-f*a,c=a/2+l/2}}r.lineTo(c+o,i);for(var h=0;h<=f-2;h++){r.lineTo(c+h*a+a/2+o,n-s);r.lineTo(c+h*a+a+o,i)}r.lineTo(t-o,n-s)}break;case"style6":{i=n-s-STYLE6_BOTTOM_HEIGHT;r.moveTo(o,n-s);r.lineTo((t-2*o)/4+o,i);r.lineTo((t-2*o)/2+o,n-s);r.lineTo(3*(t-2*o)/4+o,i);r.lineTo(t-o,n-s)}break;case"style7":{i=n-s-STYLE7_BOTTOM_HEIGHT;r.moveTo(o,i);r.arcTo(o,n-s,STYLE7_BOTTOM_HEIGHT,n-s,STYLE7_BOTTOM_HEIGHT);r.lineTo(t-o-STYLE7_BOTTOM_HEIGHT,n-s);r.arcTo(t-o,n-s,t,n-s-STYLE7_BOTTOM_HEIGHT,STYLE7_BOTTOM_HEIGHT)}break}r.lineTo(t-o,0);r.lineTo(o,0);r.closePath();r.lineWidth=1;if(config.itemShadow==="true"){r.shadowBlur=2;r.shadowOffsetX=0;r.shadowOffsetY=2;r.shadowColor="rgba(0,0,0,0.2)"}if(config.backgroundType==="texture"){r.clearRect(0,0,t,n);r.mozImageSmoothingEnabled=false;r.fillStyle=r.createPattern(textureImg,"repeat");r.strokeStyle=r.createPattern(textureImg,"repeat");r.lineJoin="miter";r.stroke();r.fill()}else{if(config.backgroundGradient==="true"){var p=r.createLinearGradient(0,0,0,n);p.addColorStop(0,"#"+config.backgroundColor);p.addColorStop(.5,NSHelper.colorLuminosity(config.backgroundColor,DARK_MIDDLE_PERCENT));p.addColorStop(1,NSHelper.colorLuminosity(config.backgroundColor,DARK_BOTTOM_PERCENT));r.fillStyle=p;r.strokeStyle=p;r.lineJoin="miter";r.stroke();r.fill()}else{r.fillStyle="#"+config.backgroundColor;r.strokeStyle="#"+config.backgroundColor;r.lineJoin="miter";r.stroke();r.fill()}}e.style.width=t+"px";e.style.height=n+"px"}}function setButtonBg(e,t,n){if(config.barStyle==="style7"){e.style.borderRadius="0px 0px 6px 6px"}else{e.style.borderRadius=""}if(config.backgroundType==="solid"){if(config.backgroundGradient==="true"){if(isHTML5Browser){e.style.background="linear-gradient(top, #"+config.backgroundColor+" 0%, "+NSHelper.colorLuminosity(config.backgroundColor,DARK_MIDDLE_PERCENT)+" 50%,"+NSHelper.colorLuminosity(config.backgroundColor,DARK_BOTTOM_PERCENT)+" 100%)";e.style.background="-moz-linear-gradient(top, #"+config.backgroundColor+" 0%, "+NSHelper.colorLuminosity(config.backgroundColor,DARK_MIDDLE_PERCENT)+" 50%,"+NSHelper.colorLuminosity(config.backgroundColor,DARK_BOTTOM_PERCENT)+" 100%)";e.style.background="-webkit-linear-gradient(top, #"+config.backgroundColor+" 0%, "+NSHelper.colorLuminosity(config.backgroundColor,DARK_MIDDLE_PERCENT)+" 50%,"+NSHelper.colorLuminosity(config.backgroundColor,DARK_BOTTOM_PERCENT)+" 100%)";e.style.background="-ms-linear-gradient(top, #"+config.backgroundColor+" 0%, "+NSHelper.colorLuminosity(config.backgroundColor,DARK_MIDDLE_PERCENT)+" 50%,"+NSHelper.colorLuminosity(config.backgroundColor,DARK_BOTTOM_PERCENT)+" 100%)";e.style.background="-o-linear-gradient(top, #"+config.backgroundColor+" 0%, "+NSHelper.colorLuminosity(config.backgroundColor,DARK_MIDDLE_PERCENT)+" 50%,"+NSHelper.colorLuminosity(config.backgroundColor,DARK_BOTTOM_PERCENT)+" 100%)";e.style.filter='progid:DXImageTransform.Microsoft.gradient(startColorStr="#'+config.backgroundColor+'", endColorStr="'+NSHelper.colorLuminosity(config.backgroundColor,DARK_BOTTOM_PERCENT)+'", GradientType=0)';if(isIE9){e.style.background="";e.style.backgroundColor="#"+config.backgroundColor;e.style.backgroundImage="";e.style.backgroundRepeat="";e.style.filter=""}}else{if(isIE9){e.style.background="";e.style.backgroundColor="#"+config.backgroundColor;e.style.backgroundImage="";e.style.backgroundRepeat="";e.style.filter=""}e.style.filter='progid:DXImageTransform.Microsoft.gradient(startColorStr="#'+config.backgroundColor+'", endColorStr="'+NSHelper.colorLuminosity(config.backgroundColor,DARK_BOTTOM_PERCENT)+'", GradientType=0)'}}else{e.style.background="";e.style.backgroundColor="#"+config.backgroundColor;e.style.backgroundImage="";e.style.backgroundRepeat="";e.style.filter=""}}else{e.style.backgroundColor="transparent";e.style.backgroundImage="url("+notifyPaths.background+"textures/"+config.backgroundColor+")";e.style.backgroundRepeat="repeat"}if(config.itemShadow==="true"){if(isHTML5Browser){e.style.boxShadow="0 0 2px 1px rgba(0, 0, 0, 0.5)";e.style["-moz-box-shadow"]="0 0 2px 1px rgba(0, 0, 0, 0.5)";e.style["-webkit-box-shadow"]="0 0 2px 1px rgba(0, 0, 0, 0.5)";e.style["-o-box-shadow"]="0 0 2px 1px rgba(0, 0, 0, 0.5)";e.style["-ms-box-shadow"]="0 0 2px 1px rgba(0, 0, 0, 0.5)"}}else{e.style.boxShadow="";e.style["-moz-box-shadow"]="";e.style["-webkit-box-shadow"]="";e.style["-o-box-shadow"]="";e.style["-ms-box-shadow"]=""}if(config.itemShadow==="true"){if(config.backgroundType==="solid"&&config.backgroundGradient==="true"){e.style.filter='progid:DXImageTransform.Microsoft.gradient(startColorStr="#'+config.backgroundColor+'", endColorStr="'+NSHelper.colorLuminosity(config.backgroundColor,DARK_BOTTOM_PERCENT)+'", GradientType=0) progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=180, Color="#666666")'}else{e.style.filter='progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=180, Color="#666666")'}}e.style.width=t+"px";e.style.height=n+"px"}function setupHoverClick(e,t){var n=isHTML5Browser&&!isIE9?"rgba(255, 255, 255, 0.2)":"33FFFFFF",r=isHTML5Browser&&!isIE9?"rgba(0, 0, 0, 0.2)":"33000000",i=isHTML5Browser&&!isIE9?"rgba(0, 0, 0, 0.1)":"1A000000",s=isHTML5Browser&&!isIE9?"rgba(255, 255, 255, 0.1)":"1AFFFFFF",o=this;if(isHTML5Browser){e.style.background="-moz-linear-gradient(top, "+n+" 0%, "+r+" 100%) repeat scroll 0 0 transparent";e.style.background="-webkit-linear-gradient(top, "+n+" 0%, "+r+" 100%) repeat scroll 0 0 transparent";e.style.background="-o-linear-gradient(top, "+n+" 0%, "+r+" 100%) repeat scroll 0 0 transparent";e.style.background="-ms-linear-gradient(top, "+n+" 0%, "+r+" 100%) repeat scroll 0 0 transparent";e.style.background="linear-gradient(to bottom, "+n+" 0%, "+r+" 100%) repeat scroll 0 0 transparent";e.style.filter='progid:DXImageTransform.Microsoft.gradient(startColorStr="#'+n+'", endColorStr="#'+r+'", GradientType=0)'}else{e.style.filter='progid:DXImageTransform.Microsoft.gradient(startColorStr="#'+n+'", endColorStr="#'+r+'", GradientType=0)'}if(!isMobileDevice){e.onmouseover=function(){if(isHTML5Browser){e.style.background="-moz-linear-gradient(top, "+i+" 0%, "+i+" 100%) repeat scroll 0 0 transparent";e.style.background="-webkit-linear-gradient(top, "+i+" 0%, "+i+" 100%) repeat scroll 0 0 transparent";e.style.background="-o-linear-gradient(top, "+i+" 0%, "+i+" 100%) repeat scroll 0 0 transparent";e.style.background="-ms-linear-gradient(top, "+i+" 0%, "+i+" 100%) repeat scroll 0 0 transparent";e.style.background="linear-gradient(to bottom, "+i+" 0%, "+i+" 100%) repeat scroll 0 0 transparent";e.style.filter='progid:DXImageTransform.Microsoft.gradient(startColorStr="#'+i+'", endColorStr="#'+i+'", GradientType=0)'}else{e.style.filter='progid:DXImageTransform.Microsoft.gradient(startColorStr="#'+i+'", endColorStr="#'+i+'", GradientType=0)'}};e.onmouseout=function(){if(isHTML5Browser){e.style.background="-moz-linear-gradient(top, "+n+" 0%, "+r+" 100%) repeat scroll 0 0 transparent";e.style.background="-webkit-linear-gradient(top, "+n+" 0%, "+r+" 100%) repeat scroll 0 0 transparent";e.style.background="-o-linear-gradient(top, "+n+" 0%, "+r+" 100%) repeat scroll 0 0 transparent";e.style.background="-ms-linear-gradient(top, "+n+" 0%, "+r+" 100%) repeat scroll 0 0 transparent";e.style.background="linear-gradient(to bottom, "+n+" 0%, "+r+" 100%) repeat scroll 0 0 transparent";e.style.filter='progid:DXImageTransform.Microsoft.gradient(startColorStr="#'+n+'", endColorStr="#'+r+'", GradientType=0)'}else{e.style.filter='progid:DXImageTransform.Microsoft.gradient(startColorStr="#'+n+'", endColorStr="#'+r+'", GradientType=0)'}};e.onmousedown=function(){if(isHTML5Browser){e.style.background="-moz-linear-gradient(top, "+s+" 0%, "+s+" 100%) repeat scroll 0 0 transparent";e.style.background="-webkit-linear-gradient(top, "+s+" 0%, "+s+" 100%) repeat scroll 0 0 transparent";e.style.background="-o-linear-gradient(top, "+s+" 0%, "+s+" 100%) repeat scroll 0 0 transparent";e.style.background="-ms-linear-gradient(top, "+s+" 0%, "+s+" 100%) repeat scroll 0 0 transparent";e.style.background="linear-gradient(to bottom, "+s+" 0%, "+s+" 100%) repeat scroll 0 0 transparent";e.style.filter='progid:DXImageTransform.Microsoft.gradient(startColorStr="#'+s+'", endColorStr="#'+s+'", GradientType=0)'}else{e.style.filter='progid:DXImageTransform.Microsoft.gradient(startColorStr="#'+s+'", endColorStr="#'+s+'", GradientType=0)'}};e.onmouseup=function(){if(isHTML5Browser){e.style.background="-moz-linear-gradient(top, "+i+" 0%, "+i+" 100%) repeat scroll 0 0 transparent";e.style.background="-webkit-linear-gradient(top, "+i+" 0%, "+i+" 100%) repeat scroll 0 0 transparent";e.style.background="-o-linear-gradient(top, "+i+" 0%, "+i+" 100%) repeat scroll 0 0 transparent";e.style.background="-ms-linear-gradient(top, "+i+" 0%, "+i+" 100%) repeat scroll 0 0 transparent";e.style.background="linear-gradient(to bottom, "+i+" 0%, "+i+" 100%) repeat scroll 0 0 transparent";e.style.filter='progid:DXImageTransform.Microsoft.gradient(startColorStr="#'+i+'", endColorStr="#'+i+'", GradientType=0)'}else{e.style.filter='progid:DXImageTransform.Microsoft.gradient(startColorStr="#'+i+'", endColorStr="#'+i+'", GradientType=0)'}}}}function removeHoverClick(e){e.style.background="";e.style.filter="";if(!isMobileDevice){e.onmouseover=null;e.onmouseout=null;e.onmousedown=null;e.onmouseup=null}}function createWatermark(){var e,t,n,r;if(!wm&&!wmContainer){r=Math.floor(Math.random()*10)+1;t=barContainer;for(var i=1;i<=r;i++){n=document.createElement("div");cssReset(n);t.appendChild(n);t=n;if(i===1)wmContainer=t;NSHelper.setUnselectable(t)}wm=document.createElement("a");cssReset(wm);wm.setAttribute("href","");wm.setAttribute("target","_blank");wm.setAttribute("title","");wm.style.backgroundColor="transparent";wm.style.backgroundRepeat="no-repeat";wm.style.backgroundPosition="center center";wm.style.cssFloat="left";t.appendChild(wm);NSHelper.setUnselectable(wm);wmContainer.style.zIndex="2";wmContainer.style.position="absolute";wmContainer.style.overflow="hidden";if(config.itemBottom==="true"&&config.template_name==="Sharp"){wmContainer.style.top="auto";wmContainer.style.bottom="-3px"}else{wmContainer.style.bottom="auto";wmContainer.style.top="0px"}}setupWatermark.call(this)}function setupWatermark(){if(!wm&&!wmContainer)return;var e=config.backgroundTone==="dark"?notifyPaths.background+"watermark_light_"+wmSize+".png":notifyPaths.background+"watermark_dark_"+wmSize+".png";wm.style.backgroundImage="url("+e+")";positionWatermark()}function positionWatermark(){if(!wm&&!wmContainer)return;wmContainer.style.height=wm.style.height=(config.template_name==="Sharp"?barHeight-SHARP_INDENT_HEIGHT:barHeight)+"px";switch(wmSize){case"16":wmContainer.style.width=wm.style.width="16px";break;case"small":wmContainer.style.width=wm.style.width=SMALL_WM+"px";break;case"large":wmContainer.style.width=wm.style.width=LARGE_WM+"px";break}if(config.itemOpenClosePosition==="right"){wmContainer.style.right="";wmContainer.style.left=SPACING_ELEMENTE+"px"}else{wmContainer.style.left="";wmContainer.style.right=SPACING_ELEMENTE+"px"}}function cycleMessages(){clearTimeout(txtTimeout);if(messageContainer.childNodes[currentMessageIndex].style.display==="none")displayMessage(currentMessageIndex);else msgShowEnd()}function displayMessage(e){fadeIn(messageContainer.childNodes[e],300,msgShowEnd)}function hideMessage(e){fadeOut(messageContainer.childNodes[e],300,msgHideEnd)}function msgHideEnd(){currentMessageIndex++;if(currentMessageIndex>=messages.length)currentMessageIndex=0;messageContainer.childNodes[currentMessageIndex].style.opacity=0;messageContainer.childNodes[currentMessageIndex].style.display="block";resizeBar();fadeIn(messageContainer.childNodes[currentMessageIndex],300,msgShowEnd)}function msgShowEnd(){clearTimeout(txtTimeout);if(messages.length===1)return;txtTimeout=setTimeout(function(){hideMessage(currentMessageIndex)},parseInt(config.itemMessageDelay)*1e3)}function openBar(){if(isBarOpen)return;if(config.itemDismiss!=="true"||preview&&targetContainer==="inner"||type==="editable"||targetContainer!=="body"){deletePermanentCookie(hashID)}if(checkPermanentCookie(hashID)==false||config.itemDismiss!=="true"||targetContainer==="wrapper"||type==="editable"&&targetContainer!=="body"){isBarOpen=true;isFirstSlide=false;clearTimeout(openTimer);clearTimeout(closeTimer);if(config.itemClosable==="true"&&closeTabContainer&&isCloseBtnOutside){slide(barInterval,barContainer,maxBarHeight+shadowHeight+parseInt(closeTabContainer.style.height)+shadowHeight,SLIDE_SPEED,config.itemUsebounce==="true",config.itemPushing==="true"&&pusher?config.template_name==="Sharp"?maxBarHeight-SHARP_INDENT_HEIGHT:maxBarHeight:-1,function(){if(autoClose&&closeDelay>0){autoClose=false;closeTimer=setTimeout(closeBar,closeDelay*1e3)}if(messages.length>1&&!printScreen&&(type!=="editable"||targetContainer!=="wrapper"))cycleMessages()})}else{slide(barInterval,barContainer,maxBarHeight+shadowHeight,SLIDE_SPEED,config.itemUsebounce==="true",config.itemPushing==="true"&&pusher?config.template_name==="Sharp"?maxBarHeight-SHARP_INDENT_HEIGHT:maxBarHeight:-1,function(){if(autoClose&&closeDelay>0){autoClose=false;closeTimer=setTimeout(closeBar,closeDelay*1e3)}if(messages.length>1&&!printScreen&&(type!=="editable"||targetContainer!=="wrapper"))cycleMessages()})}if(config.itemClosable==="true"&&openTabContainer){slide(openBtnInterval,openTabContainer,-parseInt(openTabContainer.style.height),SLIDE_SPEED,false)}}else{}}function closeBar(){if(!isBarOpen)return;isBarOpen=false;clearTimeout(openTimer);clearTimeout(closeTimer);clearTimeout(txtTimeout);if(config.itemDismiss!=="true"||targetContainer==="wrapper"){if(config.itemClosable==="true"&&closeTabContainer&&isCloseBtnOutside){slide(barInterval,barContainer,-(maxBarHeight+shadowHeight)-parseInt(closeTabContainer.style.height)-shadowHeight,SLIDE_SPEED,false,config.itemPushing==="true"&&pusher?0:-1)}else{slide(barInterval,barContainer,-(maxBarHeight+shadowHeight),SLIDE_SPEED,false,config.itemPushing==="true"&&pusher?0:-1)}if(config.itemClosable==="true"&&openTabContainer){slide(openBtnInterval,openTabContainer,parseInt(openTabContainer.style.height),SLIDE_SPEED,config.itemUsebounce==="true")}}else{createPermanentCookie(hashID,"yes");if(config.itemClosable==="true"&&closeTabContainer&&isCloseBtnOutside){slide(barInterval,barContainer,-(maxBarHeight+shadowHeight)-parseInt(closeTabContainer.style.height)-shadowHeight,SLIDE_SPEED,false,config.itemPushing==="true"&&pusher?0:-1)}else{slide(barInterval,barContainer,-(maxBarHeight+shadowHeight),SLIDE_SPEED,false,config.itemPushing==="true"&&pusher?0:-1)}if(config.itemClosable==="true"&&openTabContainer){slide(openBtnInterval,openTabContainer,-parseInt(openTabContainer.style.height),SLIDE_SPEED,config.itemUsebounce==="true")}}}function resizeBar(){if(!bar){return}var e,t;if(preview&&targetContainer==="inner"){pusher.style.width=bar.style.width=document.getElementById(targetContainer).clientWidth+"px"}barWidth=bar.clientWidth;wmSize=maxBarHeight>WM_LIMIT?barWidth<=SMALL_WIDTH_LIMIT?"16":"large":barWidth<=SMALL_WIDTH_LIMIT?"16":"small";if(showWatermark){setupWatermark();positionWatermark()}if(barWidth<=SMALL_WIDTH_LIMIT){if(showWatermark){if(wmSize==="16")e=barWidth-16-3*SPACING_ELEMENTE;else if(wmSize==="small")e=barWidth-SMALL_WM-3*SPACING_ELEMENTE;else e=barWidth-LARGE_WM-3*SPACING_ELEMENTE}else{e=barWidth-2*SPACING_ELEMENTE}if(!isCloseBtnOutside){isCloseBtnOutside=true;if(!isBarOpen){if(config.itemBottom==="true"){barContainer.style.bottom=-(maxBarHeight+shadowHeight+parseInt(closeTabContainer.style.height)+shadowHeight)+"px";barContainer.style.top="auto"}else{barContainer.style.top=-(maxBarHeight+shadowHeight+parseInt(closeTabContainer.style.height)+shadowHeight)+"px";barContainer.style.bottom="auto"}}else{if(config.itemBottom==="true"){barContainer.style.bottom="0px";barContainer.style.top="auto"}else{barContainer.style.top="0px";barContainer.style.bottom="auto"}}if(closeTabContainer)setupCloseButton(true)}}else{e=barWidth-2*SPACING_ELEMENTE;if(showWatermark){if(wmSize==="16"){if(16+SPACING_ELEMENTE<tabWidthList[sizeIdx]+SPACING_ELEMENTE&&config.itemClosable==="true")e=e-2*(tabWidthList[sizeIdx]+SPACING_ELEMENTE);else e=e-2*(16+SPACING_ELEMENTE)}else if(wmSize==="small"){if(SMALL_WM+SPACING_ELEMENTE<tabWidthList[sizeIdx]+SPACING_ELEMENTE&&config.itemClosable==="true")e=e-2*(tabWidthList[sizeIdx]+SPACING_ELEMENTE);else e=e-2*(SMALL_WM+SPACING_ELEMENTE)}else{if(LARGE_WM+SPACING_ELEMENTE<tabWidthList[sizeIdx]+SPACING_ELEMENTE&&config.itemClosable==="true")e=e-2*(tabWidthList[sizeIdx]+SPACING_ELEMENTE);else e=e-2*(LARGE_WM+SPACING_ELEMENTE)}}else if(config.itemClosable==="true"){e=e-2*(tabWidthList[sizeIdx]+SPACING_ELEMENTE)}if(isCloseBtnOutside){isCloseBtnOutside=false;if(!isBarOpen){if(config.itemBottom==="true"){barContainer.style.bottom=-(maxBarHeight+shadowHeight)+"px";barContainer.style.top="auto"}else{barContainer.style.top=-(maxBarHeight+shadowHeight)+"px";barContainer.style.bottom="auto"}}else{if(config.itemBottom==="true"){barContainer.style.bottom="0px";barContainer.style.top="auto"}else{barContainer.style.top="0px";barContainer.style.bottom="auto"}}if(closeTabContainer)setupCloseButton(false)}}if(config.itemOpenClosePosition==="left"){if(barWidth<=SMALL_WIDTH_LIMIT)t=SPACING_ELEMENTE;else t=Math.floor((barWidth-e)/2)}else{if(showWatermark){if(barWidth<=SMALL_WIDTH_LIMIT){if(wmSize==="16")t=16+2*SPACING_ELEMENTE;else if(wmSize==="small")t=SMALL_WM+2*SPACING_ELEMENTE;else t=LARGE_WM+2*SPACING_ELEMENTE}else t=Math.floor((barWidth-e)/2)}else{if(barWidth<=SMALL_WIDTH_LIMIT)t=SPACING_ELEMENTE;else t=Math.floor((barWidth-e)/2)}}if(messageContainer){messageContainer.style.width=e+"px";messageContainer.style.height=barHeight+"px";messageContainer.style.left=t+"px";messageContainer.style.width=e+"px";messageContainer.style.left=t+"px";messageContainer.childNodes[currentMessageIndex].style.maxWidth=e+"px";messageContainer.childNodes[currentMessageIndex].childNodes[0].style.maxWidth=e-parseInt(messageContainer.childNodes[currentMessageIndex].childNodes[0].style.marginRight)-messageContainer.childNodes[currentMessageIndex].childNodes[1].clientWidth-(config.itemButton==="true"?2:0)+"px";messageContainer.childNodes[currentMessageIndex].style.width=messageContainer.childNodes[currentMessageIndex].childNodes[0].clientWidth+parseInt(messageContainer.childNodes[currentMessageIndex].childNodes[0].style.marginRight)+messageContainer.childNodes[currentMessageIndex].childNodes[1].clientWidth+(config.itemButton==="true"?2:0)+"px";messageContainer.childNodes[currentMessageIndex].style.left=Math.floor((e-messageContainer.childNodes[currentMessageIndex].clientWidth-(config.itemButton==="true"?2:0))/2)+"px"}}function fadeIn(e,t,n){clearInterval(fadeInterval);if(!e)return;var r=!e.style.opacity||e.style.opacity===""?0:parseInt(e.style.opacity),i=Math.ceil(t/30),s=Math.round(100/i)/100,o=0,u=this;e.style.opacity=r;e.style.filter='alpha(opacity="'+r*100+'");';e.style.display="block";fadeInterval=setInterval(function(){o=o+1;r=r+s;e.style.opacity=r;e.style.filter='alpha(opacity="'+r*100+'");';if(r>=1||o>=i){e.style.opacity=1;e.style.filter='alpha(opacity="100");';clearInterval(fadeInterval);if(n)n.call(u)}},30)}function fadeOut(e,t,n){clearInterval(fadeInterval);if(!e)return;var r=!e.style.opacity||e.style.opacity===""?1:parseInt(e.style.opacity),i=Math.ceil(t/30),s=Math.round(100/i)/100,o=0,u=this;e.style.opacity=r;e.style.filter='alpha(opacity="'+r*100+'");';e.style.display="block";fadeInterval=setInterval(function(){o=o+1;r=r-s;e.style.opacity=r;e.style.filter='alpha(opacity="'+r*100+'");';if(r<=0||o>=i){e.style.opacity=0;e.style.filter='alpha(opacity="0");';e.style.display="none";clearInterval(fadeInterval);if(n)n.call(u)}},30)}function slide(e,t,n,r,i,s,o){clearInterval(e);if(!t)return;if(config.itemBottom!=="true"){var u=parseInt(t.style.top),a=0,f=Math.ceil(r/20),l=this,c=(new Date).getTime(),h=typeof s==="number"&&s>-1,p=h?parseInt(pusher.style.height):-1;e=setInterval(function(){var r=(new Date).getTime();var v=r-c;c=r;if(a>f)a=f;a=a+Math.ceil(v/20);var m=i?NSHelper.easeOutBounce(a,u,n,f):NSHelper.easeOutSine(1,a,u,n,f);t.style.top=m+"px";if(h){m=Math.abs(m);if(p>0){if(config.itemPushing==="true"&&p-m>=s&&p-m<=p)pusher.style.height=p-m+"px"}else{if(config.itemPushing==="true"&&s-m<=s&&s-m>=0)pusher.style.height=s-m+"px"}}if(a>=f){clearInterval(e);t.style.top=u+n+"px";if(h)pusher.style.height=s+"px";if(o)o.call(l)}},20)}else{var u=parseInt(t.style.bottom),a=0,f=Math.ceil(r/20),l=this,c=(new Date).getTime(),h=typeof s==="number"&&s>-1,p=h?parseInt(pusher.style.height):-1;e=setInterval(function(){var r=(new Date).getTime();var v=r-c;c=r;if(a>f)a=f;a=a+Math.ceil(v/20);var m=i?NSHelper.easeOutBounce(a,u,n,f):NSHelper.easeOutSine(1,a,u,n,f);t.style.bottom=m+"px";if(h){m=Math.abs(m);if(p>0){if(config.itemPushing==="true"&&p-m>=s&&p-m<=p)pusher.style.height=p-m+"px"}else{if(config.itemPushing==="true"&&s-m<=s&&s-m>=0)pusher.style.height=s-m+"px"}}if(a>=f){clearInterval(e);t.style.bottom=u+n+"px";if(h)pusher.style.height=s+"px";if(o)o.call(l)}},20)}}function cssReset(e){if(!e||!e.style)return;var t={display:"block",border:0,margin:0,padding:0,outline:0,fontSize:"100%",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",lineHeight:"normal",verticalAlign:"base-line",background:"transparent"};for(var n in t){try{e.style[n]=t[n]}catch(r){}}}function touchHandler(e){e.preventDefault();if(e.touches&&e.touches.length===1){touch=e.touches[0];switch(e.type){case"touchstart":{isTap=true}break;case"touchmove":{isTap=false}break}}else{if(e.type==="touchend"||e.type==="touchcancel"){if(isTap){if(e.currentTarget===openBtnSymbol){autoClose=false;if(type==="published"&&!printScreen&&!preview)setDomainCookie("notifySnack-"+hashID,"opened");openBar()}else if(e.currentTarget===closeBtnSymbol){if(type==="published"&&!printScreen&&!preview)setDomainCookie("notifySnack-"+hashID,"closed");closeBar()}}}}}function createPermanentCookie(e,t){if(document.cookie.indexOf("myPermanentCookie-"+e)>=0){}else{var n="myPermanentCookie-"+e;var r=new Date;r.setTime(r.getTime()+365*24*60*1e3);var i="; expires = "+r.toGMTString();document.cookie=n+" = "+t+i+"; path=/"}}function deletePermanentCookie(e){if(document.cookie.indexOf("myPermanentCookie-"+e)>=0){document.cookie=encodeURIComponent("myPermanentCookie-"+e)+"=; expires="+(new Date(0)).toUTCString()}}function checkPermanentCookie(e){if(document.cookie.indexOf("myPermanentCookie-"+e)>=0){return true}else return false}function setDomainCookie(e,t){var n=unescape(getCookie(e)),r=n.split(","),i=0,s=false,o=currentDomain+":"+t;if(n.length===0)setCookie(e,o);else{while(i<r.length&&!s){if(r[i].indexOf(currentDomain)===0){s=true;r[i]=o}else i++}if(!s)setCookie(e,o);else setCookie(e,r.join(","))}}function getDomainCookie(e){var t=unescape(getCookie(e)),n=t.split(","),r=0,i=false;if(t.length===0)return"";else{while(r<n.length&&!i){if(n[r].indexOf(currentDomain)===0){i=true}else r++}if(!i)return"";else return n[r].split(":")[1]}}function getCookie(e){var t,n,r,i=document.cookie.split(";");for(t=0;t<i.length;t++){n=i[t].substr(0,i[t].indexOf("="));r=i[t].substr(i[t].indexOf("=")+1);n=n.replace(/^\s+|\s+$/g,"");if(n===e){return unescape(r)}}return""}function setCookie(e,t){var n=new Date;n.setDate(n.getDate()+1);var t=escape(t);document.cookie=e+"="+t}var WM_LIMIT=44,SMALL_WIDTH_LIMIT=500,LINK_FONT_HEIGHT_LIMIT=50,SPACING_ELEMENTE=20,SHARP_INDENT_WIDTH=12,SHARP_INDENT_HEIGHT=7,SHARP_INDENT_SHADOW=5,DARK_MIDDLE_PERCENT=-4,DARK_BOTTOM_PERCENT=-8,STYLE1_BOTTOM_HEIGHT=0,STYLE2_BOTTOM_HEIGHT=9,STYLE3_BOTTOM_HEIGHT=8,STYLE4_BOTTOM_HEIGHT=12,STYLE5_BOTTOM_HEIGHT=SHARP_INDENT_HEIGHT,STYLE6_BOTTOM_HEIGHT=10,STYLE7_BOTTOM_HEIGHT=0,TAB_WIDTH_LIST=[30,34,48,54],TAB_HEIGHT_LIST=[30,34,48,54],STITCH_TAB_WIDTH_LIST=[36,40,56,62],STITCH_TAB_HEIGHT_LIST=[33,37,52,58],BTN_SIZE_LIST=[18,22,32,38],FONT_HEIGHT_LIMIT=40,FONT_SIZE_LIST=[10,11,12,14,16,18,20,22,26,28,32,36],DEFAULT_BLUE="017BE3",SMALL_WM=48,LARGE_WM=63,SLIDE_SPEED=500,wmSize,hashID,editorCallback,templateHashID,notifyID,notifyPaths={resources:"",stats:"",json:"",background:""},messages=[],currentMessageIndex=0,type,isDev=false,isNotifySnackDomain=false,showWatermark=false,isFontFinished=false,isContentSetupDone=false,isBGLoaded=false,useHTTPS=document.location.protocol==="https:",isHTML5Browser,isMobileDevice,isIE9,isMacOS,snackDomains=["dev.notifysnack.net","devfiles.notifysnack.net","www.notifysnack.com","files.notifysnack.net"],currentDomain,isSnackDomain=false,hasCanvasSupport,isCloseBtnOutside=false,isBarOpen=false,isRedraw=false,isTap=false,statsTimer,disregardStatsResponse=false,canShowContent=false,autoClose=false,isFirstSlide=true,state,config,myDisplayRulesFlag,displayRulesArray,barWidth,barHeight,maxBarHeight,shadowHeight,targetContainer,pusher,bar,barContainer,barNormalBg,barCanvasBg,borderContainer,wm,wmContainer,msgContainer,linkContainer,openTabContainer,closeTabContainer,openTab,closeTab,openTabBg,openTabBgCvs,closeTabBg,closeTabBgCvs,openBtnSymbol,closeBtnSymbol,topStitch,bottomStitch,tabOpenLeftStitch,tabOpenRightStitch,tabOpenBottomStitch,tabCloseLeftStitch,tabCloseRightStitch,tabCloseBottomStitch,textureImg,upSymbol,downSymbol,symbolColor,messageContainer,tabWidthList,tabHeightList,tabExtraHeight,sizeIdx,fontSizeIdx,txtTimeout,openDelay,closeDelay,openTimer,closeTimer,printScreen,preview,isSnackws=false,snackWSGlobalBG=null,fadeInterval,barInterval,pusherInterval,openBtnInterval,closeBtnInterval;this.init=function(e){if(!e||!e.hash)return;hashID=e.hash;if(getPriorityCookie("allNotifyBars")!==null&&getPriorityCookie("allNotifyBars")!==""){var t=getPriorityCookie("allNotifyBars")+","+hashID;setPriorityCookie("allNotifyBars",t)}else{setPriorityCookie("allNotifyBars",hashID)}if(!e.id||typeof e.id==="string"&&e.id.length===0){notifyID="notifySnack-"+hashID}else{notifyID=e.id}isHTML5Browser=detectHTML5Browser();isMobileDevice=detectMobileDevice(navigator.userAgent.toLowerCase(),navigator.appVersion.toLowerCase());isIE9=detectIE9(navigator.userAgent.toLowerCase(),navigator.appVersion.toLowerCase());isMacOS=navigator.appVersion.indexOf("Mac")>-1;isNotifySnackDomain=window.location.href.indexOf("http://dev.notifysnack.net")===0||window.location.href.indexOf("http://notifysnack/")===0||window.location.href.indexOf("")===0;isSnackws=typeof e.snackws==="boolean"?e.snackws:false;if(isSnackws){snackWSGlobalBG=document.getElementById("wrapper");if(!snackWSGlobalBG)isSnackws=false}if(typeof e.callback==="function"){editorCallback=e.callback}targetContainer=e.target?e.target:"body";printScreen=isNotifySnackDomain&&e.printScreen;preview=isNotifySnackDomain&&e.preview;if(isDev){notifyPaths.json=useHTTPS?"https://s3.amazonaws.com/devfiles.notifysnack.net/notify/json/":"http://devfiles.notifysnack.net.s3.amazonaws.com/notify/json/";notifyPaths.resources=useHTTPS?"https://s3.amazonaws.com/devfiles.notifysnack.net/":"http://devfiles.notifysnack.net.s3.amazonaws.com/";notifyPaths.stats=useHTTPS?"https://stats.dev.snacktools.net/countAccess.php":"http://stats.dev.snacktools.net/countAccess.php";notifyPaths.twitter=useHTTPS?"https://stats.dev.snacktools.net/notifysnack/twitter.php":"http://stats.dev.snacktools.net/notifysnack/twitter.php"}else{notifyPaths.json=useHTTPS?"https://s3.amazonaws.com/files.notifysnack.net/notify/json/":"http://files.notifysnack.net/notify/json/";notifyPaths.resources=useHTTPS?"https://s3.amazonaws.com/files.notifysnack.net/":"http://files.notifysnack.net.s3.amazonaws.com/";notifyPaths.stats=useHTTPS?"https://stats.snacktools.net/countAccess.php":"http://stats.snacktools.net/countAccess.php";notifyPaths.twitter=useHTTPS?"https://stats.snacktools.net/notifysnack/twitter.php":"http://stats.snacktools.net/notifysnack/twitter.php"}notifyPaths.background=notifyPaths.resources+"templates/backgrounds/";currentDomain=document.domain;isSnackDomain=snackDomains.join().indexOf(currentDomain)>=0;hasCanvasSupport=!!document.createElement("canvas").getContext;navigator.sayswho=function(){var e=navigator.appName,t=navigator.userAgent,n;var r=t.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);if(r&&(n=t.match(/version\/([\.\d]+)/i))!=null)r[2]=n[1];r=r?[r[1],r[2]]:[e,navigator.appVersion,"-?"];return r}();if(type==="editable"||isNotifySnackDomain||printScreen){loadJSON_NSD()}else{if(navigator.sayswho[0]==="Chrome"||navigator.sayswho[0]==="Safari"||navigator.sayswho[0]==="Firefox"||navigator.sayswho[0]==="MSIE"&&navigator.sayswho[1]==="10.0"){NSHelper.browser="new";if(!NSHelper.alreadyInProgress){NSHelper.alreadyInProgress=true;loadFirstJSON(hashID)}}else{NSHelper.browser="other";loadJSON_2()}}window.onresize=function(){resizeBar()}};this.redraw=function(e){if(!isNotifySnackDomain||!e||typeof e!=="object")return;isRedraw=true;if(openTabBg&&openTabBg.getContext){openTabBg.getContext("2d").clearRect(0,0,tabWidthList[sizeIdx],tabHeightList[sizeIdx]+tabExtraHeight);openTabBg.style.height="0"}config={};for(var t in e.configs.params)config[t]=e.configs.params[t];config.itemButton=config.itemButton==="true"?"false":"true";config.template_name=e.configs.template_name;if(config.itemBottom==="true"){bar.style["-webkit-transition-property"]="bottom";bar.style["-moz-transition-property"]="bottom";bar.style["-ms-transition-property"]="bottom";bar.style["-o-transition-property"]="bottom";bar.style["transition-property"]="bottom";bar.style.position=targetContainer==="body"?"fixed":preview&&targetContainer==="inner"?"fixed":"absolute"}else{bar.style["-webkit-transition-property"]="top";bar.style["-moz-transition-property"]="top";bar.style["-ms-transition-property"]="top";bar.style["-o-transition-property"]="top";bar.style["transition-property"]="top";bar.style.position=targetContainer==="body"&&config.itemOntop==="true"?"fixed":preview&&targetContainer==="inner"&&config.itemOntop==="true"?"fixed":"absolute"}if(pusher)pusher.style.position=config.itemPushing==="true"?"relative":"absolute";if(!isHTML5Browser){if(config.template_name==="Sharp")config.template_name="Plain";config.barStyle="style1";config.itemRounded="false"}if(config.template_name!=="Stitch"){tabWidthList=TAB_WIDTH_LIST;tabHeightList=TAB_HEIGHT_LIST}else{tabWidthList=STITCH_TAB_WIDTH_LIST;tabHeightList=STITCH_TAB_HEIGHT_LIST}maxBarHeight=barHeight=parseInt(config.itemHeight);if(config.itemBorder==="true"&&config.template_name==="Plain")barHeight-=2;barContainer.style.height=maxBarHeight+"px";symbolColor=config.backgroundTone==="dark"?"light":"dark";if(maxBarHeight<41){sizeIdx=0;upSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_close_small_"+symbolColor+".png";downSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_open_small_"+symbolColor+".png"}else if(maxBarHeight>=41&&maxBarHeight<49){sizeIdx=1;upSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_close_small_"+symbolColor+".png";downSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_open_small_"+symbolColor+".png"}else if(maxBarHeight>=49&&maxBarHeight<60){sizeIdx=2;upSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_close_middle_"+symbolColor+".png";downSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_open_middle_"+symbolColor+".png"}else if(maxBarHeight>=60){sizeIdx=3;upSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_close_large_"+symbolColor+".png";downSymbol=notifyPaths.background+"arrows/"+config.barSymbol+"_open_large_"+symbolColor+".png"}preloadSymbols();shadowHeight=config.itemShadow==="true"?SHARP_INDENT_SHADOW:0;if(config.template_name==="Stitch")preloadStitching();if(config.backgroundType==="texture"){preloadTexture()}else{isBGLoaded=true;setBarBackground();wmSize=maxBarHeight>WM_LIMIT?barWidth<=SMALL_WIDTH_LIMIT?"16":"large":barWidth<=SMALL_WIDTH_LIMIT?"16":"small";if(showWatermark)setupWatermark();if(config.itemClosable==="true"){if(!openTabContainer)createOpenButton();else{setupOpenButton();openTabContainer.style.display="block"}if(!closeTabContainer)createCloseButton();else{setupCloseButton(isCloseBtnOutside);closeTabContainer.style.display="block"}}else{if(openTabContainer)openTabContainer.style.display="none";if(closeTabContainer)closeTabContainer.style.display="none"}if(!messageContainer)createBarContent();else createMessageContainers()}};this.showMessage=function(e,t){if(!isNotifySnackDomain||typeof e!=="number")return;clearTimeout(txtTimeout);var n;if(e<=messages.length-1){if(t){n=t.linkhref.length>0&&t.linkhref!=="Link URL"?t.linkhref:"#";if(n!=="#"&&n!=="http://#"&&n.indexOf("http://")!==0&&n.indexOf("https://")!==0&&n.indexOf("ftp://")!==0&&n.indexOf("ftps://")!==0&&n.indexOf("mailto")!==0)n=""+n;messages[e].message=t.message.length>0?t.message:"Enter your message here";messages[e].linktext=t.linktext.length>0?t.linktext:"";messages[e].linkhref=n;messageContainer.childNodes[e].childNodes[0].style.width="";messageContainer.childNodes[e].childNodes[0].childNodes[0].textContent=messages[e].message;messageContainer.childNodes[e].childNodes[1].style.width="";messageContainer.childNodes[e].childNodes[1].style.height="";messageContainer.childNodes[e].childNodes[1].childNodes[0].childNodes[1].textContent="";messageContainer.childNodes[e].childNodes[1].childNodes[0].childNodes[1].style.lineHeight="normal";messageContainer.childNodes[e].childNodes[1].childNodes[0].childNodes[1].textContent=messages[e].linktext;if(n&&typeof n==="string"&&n!=="Link URL"&&n!=="#"&&n!=="http://#"&&n.length>0){messageContainer.childNodes[e].childNodes[1].setAttribute("href",n);messageContainer.childNodes[e].childNodes[1].setAttribute("target","_blank")}else{messageContainer.childNodes[e].childNodes[1].setAttribute("href","#");messageContainer.childNodes[e].childNodes[1].setAttribute("target","_self")}setupMessage(e,messageContainer.clientWidth,config.template_name==="Sharp"?barHeight-SHARP_INDENT_HEIGHT:barHeight)}if(currentMessageIndex!==e){messageContainer.childNodes[currentMessageIndex].style.opacity=0;messageContainer.childNodes[currentMessageIndex].style.display="none";currentMessageIndex=e}messageContainer.childNodes[currentMessageIndex].style.opacity=1;messageContainer.childNodes[currentMessageIndex].style.display="block"}else{n=t.linkhref.length>0?t.linkhref:"Link URL";if(n!=="#"&&n!=="http://#"&&n.indexOf("http://")!==0&&n.indexOf("https://")!==0&&n.indexOf("ftp://")!==0&&n.indexOf("ftps://")!==0&&n.indexOf("mailto")!==0)n=""+n;messages.push({message:t.message,linktext:t.linktext.length>0?t.linktext:"",linkhref:n});e=messages.length-1;createMessageContainer(e);setupBarContent(e);if(messageContainer.childNodes[currentMessageIndex]&&messageContainer.childNodes[currentMessageIndex].style.display==="block"){messageContainer.childNodes[currentMessageIndex].style.display="none";messageContainer.childNodes[currentMessageIndex].style.opacity=0}currentMessageIndex=e;messageContainer.childNodes[currentMessageIndex].style.opacity=0;messageContainer.childNodes[currentMessageIndex].style.display="block";resizeBar();messageContainer.childNodes[currentMessageIndex].style.opacity=1}};this.resetMessages=function(e){if(!isNotifySnackDomain||!e)return;clearTimeout(txtTimeout);var t,n,r;messages=[];for(var i in e){t=e[i].content;r=e[i].text.length>0?e[i].text:"Button label";n=e[i].link.length>0&&e[i].link!=="Link URL"?e[i].link:"#";if(n!=="#"&&n.indexOf("http://")!==0&&n.indexOf("https://")!==0&&n.indexOf("ftp://")!==0&&n.indexOf("ftps://")!==0&&n.indexOf("mailto")!==0)n=""+n;messages.push({message:t,linktext:r,linkhref:n})}currentMessageIndex=0;createMessageContainers()};this.destroy=function(){clearTimeout(statsTimer);clearTimeout(txtTimeout);clearInterval(fadeInterval);clearInterval(pusherInterval);clearInterval(barInterval);clearInterval(openBtnInterval);clearInterval(closeBtnInterval);if(config&&config.itemButton==="true"){for(var e=0;e<messages.length;e++)removeHoverClick(messageContainer.childNodes[e].childNodes[1].childNodes[0])}if(openBtnSymbol)removeHoverClick(openBtnSymbol.childNodes[0]);if(closeBtnSymbol)removeHoverClick(closeBtnSymbol.childNodes[0]);var t=bar.parentNode;bar.innerHTML="";if(pusher)pusher.innerHTML="";if(t){if(bar)t.removeChild(bar);if(pusher)t.removeChild(pusher)}bar=null;pusher=null;if(NSHelper.existingBar&&NSHelper.existingBar===this)NSHelper.existingBar=null};return this}})()
